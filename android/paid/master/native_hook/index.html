<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An Android Developer."><meta name=author content="Yorek Liu"><link href=https://blog.yorek.xyz/android/paid/master/native_hook/ rel=canonical><link rel=icon href=../../../../assets/images/favicon.webp><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.3.2"><title>35 | Native Hook 技术，天使还是魔鬼？ - Yorek's Blog</title><link rel=stylesheet href=../../../../assets/stylesheets/main.5d38496d.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Noto Sans SC";--md-code-font:"JetBrains Mono"}</style><script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-155096376-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#native-hook class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../../.. title="Yorek's Blog" class="md-header__button md-logo" aria-label="Yorek's Blog" data-md-component=logo> <img src=../../../../assets/images/favicon.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Yorek's Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 35 | Native Hook 技术，天使还是魔鬼？ </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-orange data-md-color-accent=deep-orange aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../3rd-library/3rd-library-source-code/ class="md-tabs__link md-tabs__link--active"> Android </a> </li> <li class=md-tabs__item> <a href=../../../../design-pattern/design-pattern/ class=md-tabs__link> Books </a> </li> <li class=md-tabs__item> <a href=../../../../leetcode/ class=md-tabs__link> LeetCode </a> </li> <li class=md-tabs__item> <a href=../../../../flutter/flutter_first_project_1/ class=md-tabs__link> Flutter </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Yorek's Blog" class="md-nav__button md-logo" aria-label="Yorek's Blog" data-md-component=logo> <img src=../../../../assets/images/favicon.webp alt=logo> </a> Yorek's Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Android <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Android data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Android </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2_1 type=checkbox id=__nav_2_1 checked> <label class=md-nav__link for=__nav_2_1> 三方库系列 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=三方库系列 data-md-level=2> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 三方库系列 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../3rd-library/3rd-library-source-code/ class=md-nav__link> Android三方库源码分析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix/ class=md-nav__link> 微信APM Matrix解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-trace/ class=md-nav__link> Matrix-TraceCanary解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-trace-plugin/ class=md-nav__link> Matrix-ASM插桩插件解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-io/ class=md-nav__link> Matrix-IOCanary解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-resource/ class=md-nav__link> Matrix-ResourceCanary解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-apk-checker/ class=md-nav__link> Matrix-ApkChecker：安装包分析检测工具 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-sqlitelint/ class=md-nav__link> Matrix-SQLiteLint解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/andresguard/ class=md-nav__link> AndResGuard资源混淆原理浅析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/hprof-shrink/ class=md-nav__link> 剖析hprof文件的两种主要裁剪流派 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/okhttp/ class=md-nav__link> OkHttp3源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/retrofit/ class=md-nav__link> Retrofit2源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/rxjava%26rxandroid/ class=md-nav__link> RxJava源码解析及使用实例 </a> </li> <li class=md-nav__item> <a href=../../../other/RxJava/ class=md-nav__link> RxJava操作符大全 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide1/ class=md-nav__link> Glide v4 源码解析（一） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide2/ class=md-nav__link> Glide v4 源码解析（二） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide3/ class=md-nav__link> Glide v4 源码解析（三） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide4/ class=md-nav__link> Glide v4 源码解析（四） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide5/ class=md-nav__link> Glide v4 源码解析（五） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide6/ class=md-nav__link> Glide v4 源码解析（六） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide7/ class=md-nav__link> Glide v4 源码解析（七） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/migrate-to-glide/ class=md-nav__link> 杂记：从Picasso迁移至Glide </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/eventbus/ class=md-nav__link> EventBus源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/leakcanary/ class=md-nav__link> LeakCanary2源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/permissiondispatcher/ class=md-nav__link> PermissionDispatcher源码解析 </a> </li> <li class=md-nav__item> <a href=../../../other/constraintlayout/ class=md-nav__link> ConstraintLayout使用大全 </a> </li> <li class=md-nav__item> <a href=../../../other/dagger2/ class=md-nav__link> 初学者的Dagger2教程 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/hotfix/ class=md-nav__link> Hotfix方案初探 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2> framework系列 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=framework系列 data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> framework系列 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%281%29/ class=md-nav__link> Activity </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%282%29/ class=md-nav__link> Service </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%283%29/ class=md-nav__link> Broadcasts </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%284%29/ class=md-nav__link> Content Providers与Fragment </a> </li> <li class=md-nav__item> <a href=../../../framework/IPC%E6%9C%BA%E5%88%B6/ class=md-nav__link> IPC机制 </a> </li> <li class=md-nav__item> <a href=../../../framework/View%E7%9A%84%E4%BA%8B%E4%BB%B6%E4%BD%93%E7%B3%BB/ class=md-nav__link> View的事件体系 </a> </li> <li class=md-nav__item> <a href=../../../framework/View%E7%9A%84%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/ class=md-nav__link> View的绘制原理以及自定义View </a> </li> <li class=md-nav__item> <a href=../../../framework/RemoteViews/ class=md-nav__link> RemoteViews </a> </li> <li class=md-nav__item> <a href=../../../framework/Drawable/ class=md-nav__link> Android中的Drawable资源 </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%8A%A8%E7%94%BB/ class=md-nav__link> Android动画 </a> </li> <li class=md-nav__item> <a href=../../../framework/Window%E4%B8%8EWindowManager/ class=md-nav__link> Window与WindowManager </a> </li> <li class=md-nav__item> <a href=../../../framework/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/ class=md-nav__link> 四大组件启动过程 </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6/ class=md-nav__link> Android消息机制 </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0/ class=md-nav__link> Android线程与线程池 </a> </li> <li class=md-nav__item> <a href=../../../framework/Bitmap%E7%9A%84%E7%BC%93%E5%AD%98%E4%B8%8E%E5%8A%A0%E8%BD%BD/ class=md-nav__link> Bitmap的缓存与加载 </a> </li> <li class=md-nav__item> <a href=../../../framework/JNI%E4%B8%8ENDK/ class=md-nav__link> JNI与NDK编程简介 </a> </li> <li class=md-nav__item> <a href=../../../framework/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=md-nav__link> Android性能优化 </a> </li> <li class=md-nav__item> <a href=../../../framework/binder1-mediaservice/ class=md-nav__link> Binder深入理解——以MediaService为例 </a> </li> <li class=md-nav__item> <a href=../../../framework/binder2/ class=md-nav__link> Binder深入理解——罗老师系列 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3> 杂记 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=杂记 data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 杂记 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../other/commands/ class=md-nav__link> Android开发常见命令 </a> </li> <li class=md-nav__item> <a href=../../../other/android-tv/ class=md-nav__link> Android TV 专项 </a> </li> <li class=md-nav__item> <a href=../../../other/annotation/ class=md-nav__link> 注解的定义及解析 </a> </li> <li class=md-nav__item> <a href=../../../other/best_throttle_in_mvvm/ class=md-nav__link> 这可能是MVVM中最优雅的按键防抖方案 </a> </li> <li class=md-nav__item> <a href=../../../other/android-jenkins/ class=md-nav__link> Jenkins for android </a> </li> <li class=md-nav__item> <a href=../../../other/SystemProrities/ class=md-nav__link> 普通Android程序使用SystemProrities </a> </li> <li class=md-nav__item> <a href=../../../other/recyclerview-cache/ class=md-nav__link> ListView、RecyclerView缓存策略解析 </a> </li> <li class=md-nav__item> <a href=../../../other/recyclerview-item-docoration/ class=md-nav__link> RecyclerView高级特性——ItemDecoration </a> </li> <li class=md-nav__item> <a href=../../../other/recyclerview-others/ class=md-nav__link> RecyclerView的一些使用细节 </a> </li> <li class=md-nav__item> <a href=../../../other/RecyclerView-Sort%26Delete/ class=md-nav__link> RecyclerView高级特性——拖拽排序以及滑动删除 </a> </li> <li class=md-nav__item> <a href=../../../other/FAB-Behavior/ class=md-nav__link> FloatingActionButton上滑隐藏下滑显示 </a> </li> <li class=md-nav__item> <a href=../../../other/nestedscrolling/ class=md-nav__link> NestedScrolling机制 </a> </li> <li class=md-nav__item> <a href=../../../other/porterduff/ class=md-nav__link> 使用Porter-Duff合成数字图像 </a> </li> <li class=md-nav__item> <a href=../../../other/runtime/ class=md-nav__link> Android Runtime </a> </li> <li class=md-nav__item> <a href=../../../other/android_alias/ class=md-nav__link> Android马甲包的那些事儿 </a> </li> <li class=md-nav__item> <a href=../../../other/Android-Development-Tool/ class=md-nav__link> Android神兵利器 </a> </li> <li class=md-nav__item> <a href=../../../other/FileProvider/ class=md-nav__link> FileProvider </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E5%88%A4%E6%96%AD%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%AB%98%E5%BA%A6/ class=md-nav__link> Android判断虚拟按键(导航栏)显示与否、高度以及获取屏幕实际高度 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E5%9B%BE%E7%89%87%E9%80%89%E6%8B%A9%E5%99%A8/ class=md-nav__link> Android图片选择器 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F%E6%A1%86%E6%9E%B6/ class=md-nav__link> Android原生底部导航栏 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E6%90%9C%E7%B4%A2%E6%A0%8F%E7%9A%84%E5%AE%9E%E7%8E%B0/ class=md-nav__link> Android搜索栏的实现 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E6%9A%82%E5%81%9C%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8%E7%9A%84%E6%92%AD%E6%94%BE/ class=md-nav__link> Android暂停酷狗、网易云音乐等音乐播放器的播放 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E6%BB%91%E5%8A%A8%E8%BF%94%E5%9B%9E%E5%AE%9E%E8%B7%B5/ class=md-nav__link> Android滑动返回实践 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E7%A8%8B%E5%BA%8F%E5%8F%8D%E7%BC%96%E8%AF%91/ class=md-nav__link> MacOS下Android程序反编译 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E9%80%9A%E8%AE%AF%E5%BD%95%E5%BF%AB%E9%80%9F%E8%AF%BB%E5%8F%96/ class=md-nav__link> Android通讯录快速读取 </a> </li> <li class=md-nav__item> <a href=../../../other/soft-keyboard-in-app/ class=md-nav__link> App内自定义软键盘 </a> </li> <li class=md-nav__item> <a href=../../../other/%E8%85%BE%E8%AE%AFX5%E5%86%85%E6%A0%B8%E5%85%A5%E5%9D%91%E6%8C%87%E5%8D%97/ class=md-nav__link> 腾讯TBS X5浏览器内核入坑指南 </a> </li> <li class=md-nav__item> <a href=../../../other/%E7%90%90%E7%A2%8E%E7%9F%A5%E8%AF%86%E7%82%B9/ class=md-nav__link> 琐碎知识点 </a> </li> <li class=md-nav__item> <a href=../../../other/%E7%90%90%E7%A2%8E%E7%9F%A5%E8%AF%86%E7%82%B92/ class=md-nav__link> 琐碎知识点2 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4 checked> <label class=md-nav__link for=__nav_2_4> 基础知识 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=基础知识 data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 基础知识 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../zsxq/week1-synchronized/ class=md-nav__link> 理解Java中synchronized关键词 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week2-service/ class=md-nav__link> 理解Service </a> </li> <li class=md-nav__item> <a href=../../zsxq/week3-activity/ class=md-nav__link> 理解Activity的启动模式 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week4-startActivityForResult/ class=md-nav__link> 关于startActivityForResult </a> </li> <li class=md-nav__item> <a href=../../zsxq/week5-view/ class=md-nav__link> 关于View的知识 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week6-gradle/ class=md-nav__link> 关于Gradle的知识 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week7-serialization/ class=md-nav__link> 关于序列化的知识 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week10-classloader/ class=md-nav__link> Android中的ClassLoader </a> </li> <li class=md-nav__item> <a href=../../zsxq/week11-binder/ class=md-nav__link> Binder简介 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week12-retrofit-okhttp/ class=md-nav__link> OkHttp和Retrofit的作用以及两者之间的联系 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week14-jvm-gc/ class=md-nav__link> JVM中垃圾回收策略 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week16-keep-app-alive/ class=md-nav__link> 进程保活 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week17-android-components/ class=md-nav__link> 四大组件的作用以及多进程 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week20-network-protocol/ class=md-nav__link> 网络协议 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week21-mvc%26mvp%26mvvm/ class=md-nav__link> MVC、MVP和MVVM </a> </li> <li class=md-nav__item> <a href=../../zsxq/week22-android-studio-build/ class=md-nav__link> Android Studio build过程 </a> </li> <li class=md-nav__item> <a href=../../zsxq/week23-load-large-bitmap/ class=md-nav__link> 大尺寸图片加载问题 </a> </li> <li class=md-nav__item> <a href=../../../../java/generics-java-kotlin/ class=md-nav__link> Java&Kotlin在泛型方面的区别 </a> </li> <li class=md-nav__item> <a href=../../../../java/java-collections/ class=md-nav__link> Java集合总结 </a> </li> <li class=md-nav__item> <a href=../../../../java/java-foundation/ class=md-nav__link> Java常见概念 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5 checked> <label class=md-nav__link for=__nav_2_5> Android开发高手课 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Android开发高手课 data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Android开发高手课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Android开发高手课 </a> </li> <li class=md-nav__item> <a href=../crash_1/ class=md-nav__link> 01 | 崩溃优化（上）：关于“崩溃”那些事儿 </a> </li> <li class=md-nav__item> <a href=../crash_2/ class=md-nav__link> 02 | 崩溃优化（下）：应用崩溃了，你应该如何去分析？ </a> </li> <li class=md-nav__item> <a href=../memory_1/ class=md-nav__link> 03 | 内存优化（上）：4GB内存时代，再谈内存优化 </a> </li> <li class=md-nav__item> <a href=../memory_2/ class=md-nav__link> 04 | 内存优化（下）：内存优化这件事，应该从哪里着手？ </a> </li> <li class=md-nav__item> <a href=../stuck_1/ class=md-nav__link> 05 | 卡顿优化（上）：你要掌握的卡顿分析方法 </a> </li> <li class=md-nav__item> <a href=../stuck_2/ class=md-nav__link> 06 | 卡顿优化（下）：如何监控应用卡顿？ </a> </li> <li class=md-nav__item> <a href=../stuck_3/ class=md-nav__link> 06补充篇 | 卡顿优化：卡顿现场与卡顿分析 </a> </li> <li class=md-nav__item> <a href=../start_1/ class=md-nav__link> 07 | 启动优化（上）：从启动过程看启动速度优化 </a> </li> <li class=md-nav__item> <a href=../start_2/ class=md-nav__link> 08 | 启动优化（下）：优化启动速度的进阶方法 </a> </li> <li class=md-nav__item> <a href=../io_1/ class=md-nav__link> 09 | I/O优化（上）：开发工程师必备的I/O优化知识 </a> </li> <li class=md-nav__item> <a href=../io_2/ class=md-nav__link> 10 | I/O优化（中）：不同I/O方式的使用场景是什么？ </a> </li> <li class=md-nav__item> <a href=../io_3/ class=md-nav__link> 11 | I/O优化（下）：如何监控线上I/O操作？ </a> </li> <li class=md-nav__item> <a href=../storage_1/ class=md-nav__link> 12 | 存储优化（上）：常见的数据存储方法有哪些？ </a> </li> <li class=md-nav__item> <a href=../storage_2/ class=md-nav__link> 13 | 存储优化（中）：如何优化数据存储？ </a> </li> <li class=md-nav__item> <a href=../storage_3/ class=md-nav__link> 14 | 存储优化（下）：数据库SQLite的使用和优化 </a> </li> <li class=md-nav__item> <a href=../network_1/ class=md-nav__link> 15 | 网络优化（上）：移动开发工程师必备的网络优化知识 </a> </li> <li class=md-nav__item> <a href=../network_2/ class=md-nav__link> 16 | 网络优化（中）：复杂多变的移动网络该如何优化？ </a> </li> <li class=md-nav__item> <a href=../network_3/ class=md-nav__link> 17 | 网络优化（下）：大数据下网络该如何监控？ </a> </li> <li class=md-nav__item> <a href=../battery_1/ class=md-nav__link> 18 | 耗电优化（上）：从电量优化的演进看耗电分析 </a> </li> <li class=md-nav__item> <a href=../battery_2/ class=md-nav__link> 19 | 耗电优化（下）：耗电的优化方法与线上监控 </a> </li> <li class=md-nav__item> <a href=../ui_1/ class=md-nav__link> 20 | UI 优化（上）：UI 渲染的几个关键概念 </a> </li> <li class=md-nav__item> <a href=../ui_2/ class=md-nav__link> 21 | UI 优化（下）：如何优化 UI 渲染？ </a> </li> <li class=md-nav__item> <a href=../package_1/ class=md-nav__link> 22 | 包体积优化（上）：如何减少安装包大小？ </a> </li> <li class=md-nav__item> <a href=../package_2/ class=md-nav__link> 23 | 包体积优化（下）：资源优化的进阶实践 </a> </li> <li class=md-nav__item> <a href=../compile/ class=md-nav__link> 26 | 关于编译，你需要了解什么？ </a> </li> <li class=md-nav__item> <a href=../bytecode/ class=md-nav__link> 27 | 编译插桩的三种方法：AspectJ、ASM、ReDex </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 35 | Native Hook 技术，天使还是魔鬼？ <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 35 | Native Hook 技术，天使还是魔鬼？ </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#native-hook class=md-nav__link> Native Hook 的不同流派 </a> <nav class=md-nav aria-label="Native Hook 的不同流派"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-gotplt-hook class=md-nav__link> 1. GOT/PLT Hook </a> <nav class=md-nav aria-label="1. GOT/PLT Hook"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#elf class=md-nav__link> ELF 格式 </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 链接过程 </a> </li> <li class=md-nav__item> <a href=#gotplt-hook class=md-nav__link> GOT/PLT Hook 实践 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-trap-hook class=md-nav__link> 2. Trap Hook </a> <nav class=md-nav aria-label="2. Trap Hook"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ptrace class=md-nav__link> ptrace </a> </li> <li class=md-nav__item> <a href=#hook class=md-nav__link> 如何 Hook </a> </li> <li class=md-nav__item> <a href=#trap-hook class=md-nav__link> Trap Hook 实践 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-inline-hook class=md-nav__link> 3. Inline Hook </a> <nav class=md-nav aria-label="3. Inline Hook"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#arm32 class=md-nav__link> ARM32 指令集 </a> </li> <li class=md-nav__item> <a href=#inline-hook class=md-nav__link> Inline Hook 实践 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 各个流派的优缺点比较 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 总结 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 推荐文章 </a> </li> <li class=md-nav__item> <a href=#readelf class=md-nav__link> readelf指令 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Books <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Books data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1> Design Pattern <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Design Pattern" data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Design Pattern </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../design-pattern/design-pattern/ class=md-nav__link> 设计模式概述 </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/design-principle/ class=md-nav__link> 面向对象的六大原则 </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/singleton/ class=md-nav__link> 单例模式(Singleton) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/builder/ class=md-nav__link> 建造者模式(Builder) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/prototype/ class=md-nav__link> 原型模式(Prototype) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/factory-method/ class=md-nav__link> 工厂方法模式(Factory method) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/abstract-factory/ class=md-nav__link> 抽象工厂模式(Abstract factory) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/proxy/ class=md-nav__link> 代理模式(Proxy) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/composite/ class=md-nav__link> 组合模式(Composite) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/adapter/ class=md-nav__link> 适配器模式(Adapter) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/decorator/ class=md-nav__link> 装饰模式(Decorator) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/flyweight/ class=md-nav__link> 享元模式(Flyweight) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/facade/ class=md-nav__link> 外观模式(Facade) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/bridge/ class=md-nav__link> 桥接模式(Bridge) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/strategy/ class=md-nav__link> 策略模式(Strategy) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/state/ class=md-nav__link> 状态模式(State) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/chain-of-responsibility/ class=md-nav__link> 责任链模式(Chain of responsibility) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/interpreter/ class=md-nav__link> 解释器模式(Interpreter) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/command/ class=md-nav__link> 命令模式(Command) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/observer/ class=md-nav__link> 观察者模式(Observer) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/memento/ class=md-nav__link> 备忘录模式(Memento) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/iterator/ class=md-nav__link> 迭代器模式(Iterator) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/template-method/ class=md-nav__link> 模版方法模式(Template method) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/visitor/ class=md-nav__link> 访问者模式(Visitor) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/mediator/ class=md-nav__link> 中介者模式(Mediator) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/confusing-design-pattern/ class=md-nav__link> 易混淆的设计模式 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2 checked> <label class=md-nav__link for=__nav_3_2> Effective Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Effective Java" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Effective Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../effective-java/effective-java/ class=md-nav__link> Effective Java概述 </a> </li> <li class=md-nav__item> <a href=../../../../effective-java/chapter1/ class=md-nav__link> 创建和销毁对象 </a> </li> <li class=md-nav__item> <a href=../../../../effective-java/chapter2/ class=md-nav__link> 对于所有对象都通用的方法 </a> </li> <li class=md-nav__item> <a href=../../../../effective-java/chapter3/ class=md-nav__link> 类和接口 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3> JVM <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JVM data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> JVM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../jvm/jvm-content/ class=md-nav__link> 深入理解Java虚拟机 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/java-memory-area-oom/ class=md-nav__link> Java内存区域与内存溢出异常 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/java-gc/ class=md-nav__link> 垃圾收集器与内存分配策略 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/class-struct/ class=md-nav__link> 类文件结构 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/load-class/ class=md-nav__link> 虚拟机类加载机制 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4 checked> <label class=md-nav__link for=__nav_3_4> Refactoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Refactoring data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Refactoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../refactoring/refactoring/ class=md-nav__link> 重构：改善既有代码的设计 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> LeetCode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=LeetCode data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> LeetCode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../leetcode/ class=md-nav__link> 算法目录 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_1/ class=md-nav__link> 数据结构、算法和数据操作 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_3/ class=md-nav__link> 高质量的代码 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_4/ class=md-nav__link> 解决问题的思路 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_5/ class=md-nav__link> 优化时间和空间效率 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_6/ class=md-nav__link> 面试中的各项能力 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/array/ class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode1-10/ class=md-nav__link> LeetCode(1-10) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode11-20/ class=md-nav__link> LeetCode(11-20) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode21-30/ class=md-nav__link> LeetCode(21-30) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode31-40/ class=md-nav__link> LeetCode(31-40) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode41-50/ class=md-nav__link> LeetCode(41-50) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode51-60/ class=md-nav__link> LeetCode(51-60) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode61-70/ class=md-nav__link> LeetCode(61-70) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode71-80/ class=md-nav__link> LeetCode(71-80) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode81-90/ class=md-nav__link> LeetCode(81-90) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode91-100/ class=md-nav__link> LeetCode(91-100) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode101-110/ class=md-nav__link> LeetCode(101-110) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode111-120/ class=md-nav__link> LeetCode(111-120) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Flutter <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Flutter data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Flutter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_1/ class=md-nav__link> 年轻人的第一个Flutter程序(1) </a> </li> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_2/ class=md-nav__link> 年轻人的第一个Flutter程序(2) </a> </li> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_3/ class=md-nav__link> 年轻人的第一个Flutter程序(3) </a> </li> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_4/ class=md-nav__link> 年轻人的第一个Flutter程序(4) </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#native-hook class=md-nav__link> Native Hook 的不同流派 </a> <nav class=md-nav aria-label="Native Hook 的不同流派"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-gotplt-hook class=md-nav__link> 1. GOT/PLT Hook </a> <nav class=md-nav aria-label="1. GOT/PLT Hook"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#elf class=md-nav__link> ELF 格式 </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 链接过程 </a> </li> <li class=md-nav__item> <a href=#gotplt-hook class=md-nav__link> GOT/PLT Hook 实践 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-trap-hook class=md-nav__link> 2. Trap Hook </a> <nav class=md-nav aria-label="2. Trap Hook"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ptrace class=md-nav__link> ptrace </a> </li> <li class=md-nav__item> <a href=#hook class=md-nav__link> 如何 Hook </a> </li> <li class=md-nav__item> <a href=#trap-hook class=md-nav__link> Trap Hook 实践 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-inline-hook class=md-nav__link> 3. Inline Hook </a> <nav class=md-nav aria-label="3. Inline Hook"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#arm32 class=md-nav__link> ARM32 指令集 </a> </li> <li class=md-nav__item> <a href=#inline-hook class=md-nav__link> Inline Hook 实践 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 各个流派的优缺点比较 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 总结 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 推荐文章 </a> </li> <li class=md-nav__item> <a href=#readelf class=md-nav__link> readelf指令 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>35 | Native Hook 技术，天使还是魔鬼？</h1> <div class="admonition tip"> <p class=admonition-title>极客时间——<a href=https://time.geekbang.org/column/intro/142>Android开发高手课</a></p> <p>本栏目内容源于<a href=https://time.geekbang.org/column/intro/142>Android开发高手课</a>，外加Sample的个人练习小结。本栏目内的内容将会持续混合着博主个人的收集到的知识点。若本栏目内容令人不适，请移步原始课程。 </p> </div> <h2 id=native-hook>Native Hook 的不同流派<a class=headerlink href=#native-hook title="Permanent link">&para;</a></h2> <p>对于 Native Hook 技术，比较常见的有 GOT/PLT Hook、Trap Hook 以及 Inline Hook，下面逐个讲解这些 Hook 技术的实现原理和优劣比较。</p> <h3 id=1-gotplt-hook>1. GOT/PLT Hook<a class=headerlink href=#1-gotplt-hook title="Permanent link">&para;</a></h3> <p>在<a href=https://github.com/AndroidAdvanceWithGeektime/Chapter06-plus>Chapter06-plus</a>中，我们使用了 PLT Hook 技术来获取线程创建的堆栈。先来回顾一下它的整个流程，我们将 libart.so 中的外部函数 pthread_create 替换成自己的方法 pthread_create_hook。</p> <p><img alt=native_hook_pthread src=/assets/images/android/native_hook_pthread.webp></p> <p>你可以发现，GOT/PLT Hook 主要是用于替换某个 SO 的外部调用，通过将外部函数调用跳转成我们的目标函数。GOT/PLT Hook 可以说是一个非常经典的 Hook 方法，它非常稳定，可以达到部署到生产环境的标准。</p> <p>那 GOT/PLT Hook 的实现原理究竟是什么呢？你需要先对 SO 库文件的 ELF 文件格式和动态链接过程有所了解。</p> <h4 id=elf>ELF 格式<a class=headerlink href=#elf title="Permanent link">&para;</a></h4> <p>ELF（Executableand Linking Format）是可执行和链接格式，它是一个开放标准，各种 UNIX 系统的可执行文件大多采用 ELF 格式。虽然 ELF 文件本身就支持三种不同的类型（重定位、执行、共享），不同的视图下格式稍微不同，不过它有一个统一的结构，这个结构如下图所示。</p> <p><img alt=elf src=/assets/images/android/native_hook_elf.png></p> <p>网上介绍 ELF 格式的文章非常多，你可以参考<a href=https://felixzhang00.github.io/2016/12/24/2016-12-24-ELF%E6%96%87%E4%BB%B6%E8%A3%85%E8%BD%BD%E9%93%BE%E6%8E%A5%E8%BF%87%E7%A8%8B%E5%8F%8Ahook%E5%8E%9F%E7%90%86/ >《ELF 文件格式解析》</a>。顾名思义，对于 GOT/PLT Hook 来说，我们主要关心“.plt”和“.got”这两个节区：</p> <ul> <li>.plt。该节保存过程链接表（Procedure Linkage Table）。</li> <li>.got。该节保存着全局的偏移量表。</li> </ul> <p>我们也可以使用<code>readelf -S</code>来查看 ELF 文件的具体信息。</p> <h4 id=_1>链接过程<a class=headerlink href=#_1 title="Permanent link">&para;</a></h4> <p>接下来我们再来看看动态链接的过程，当需要使用一个 Native 库（.so 文件）的时候，我们需要调用dlopen("libname.so")来加载这个库。</p> <p>在我们调用了dlopen("libname.so")之后，系统首先会检查缓存中已加载的 ELF 文件列表。如果未加载则执行加载过程，如果已加载则计数加一，忽略该调用。然后系统会用从 libname.so 的dynamic节区中读取其所依赖的库，按照相同的加载逻辑，把未在缓存中的库加入加载列表。</p> <p>你可以使用下面这个命令来查看一个库的依赖：</p> <div class=highlight><pre><span></span><code>readelf -d &lt;library&gt; <span class=p>|</span> grep NEEDED
</code></pre></div> <p>下面我们大概了解一下系统是如何加载的 ELF 文件的。</p> <ul> <li>读 ELF 的程序头部表，把所有 PT_LOAD 的节区 mmap 到内存中。</li> <li>从“.dynamic”中读取各信息项，计算并保存所有节区的虚拟地址，然后执行重定位操作。</li> <li>最后 ELF 加载成功，引用计数加一。</li> </ul> <p>但是这里有一个关键点，在 ELF 文件格式中我们只有函数的绝对地址。如果想在系统中运行，这里需要经过 <strong>重定位</strong>。这其实是一个比较复杂的问题，因为不同机器的 CPU 架构、加载顺序不同，导致我们只能在运行时计算出这个值。不过还好动态加载器（/system/bin/linker）会帮助我们解决这个问题。</p> <p>如果你理解了动态链接的过程，我们再回头来思考一下“.got”和“.plt”它们的具体含义。</p> <ul> <li> <p><strong>The Global Offset Table (GOT)</strong>。简单来说就是在数据段的地址表，假定我们有一些代码段的指令引用一些地址变量，编译器会引用 GOT 表来替代直接引用绝对地址，因为绝对地址在编译期是无法知道的，只有重定位后才会得到 ，GOT 自己本身将会包含函数引用的绝对地址。</p> </li> <li> <p><strong>The Procedure Linkage Table (PLT)</strong>。PLT 不同于 GOT，它位于代码段，动态库的每一个外部函数都会在 PLT 中有一条记录，每一条 PLT 记录都是一小段可执行代码。 一般来说，外部代码都是在调用 PLT 表里的记录，然后 PLT 的相应记录会负责调用实际的函数。我们一般把这种设定叫作“<a href=https://en.wikipedia.org/wiki/Trampoline_%28computing%29>蹦床</a>”（Trampoline）。</p> </li> </ul> <p>PLT 和 GOT 记录是一一对应的，并且 GOT 表第一次解析后会包含调用函数的实际地址。既然这样，那 PLT 的意义究竟是什么呢？PLT 从某种意义上赋予我们一种懒加载的能力。当动态库首次被加载时，所有的函数地址并没有被解析。下面让我们结合图来具体分析一下首次函数调用，请注意图中黑色箭头为跳转，紫色为指针。</p> <p><img alt=native_hook_plt_got src=/assets/images/android/native_hook_plt_got.webp></p> <ul> <li>我们在代码中调用 func，编译器会把这个转化为 func@plt，并在 PLT 表插入一条记录。</li> <li>PLT 表中第一条（或者说第 0 条）PLT[0]是一条特殊记录，它是用来帮助我们解析地址的。通常在类 Linux 系统，这个的实现会位于动态加载器，就是专栏前面文章提到的 /system/bin/linker。</li> <li>其余的 PLT 记录都均包含以下信息：<ul> <li>跳转 GOT 表的指令（jmp *GOT[n]）。</li> <li>为上面提到的第 0 条解析地址函数准备参数。</li> <li>调用 PLT[0]，这里 resovler 的实际地址是存储在 GOT[2] 。</li> </ul> </li> <li>在解析前 GOT[n]会直接指向 jmp *GOT[n]的下一条指令。在解析完成后，我们就得到了 func 的实际地址，动态加载器会将这个地址填入 GOT[n]，然后调用 func。</li> </ul> <p>如果对上面的这个调用流程还有疑问，你可以参考<a href=https://www.jianshu.com/p/0ac63c3744dd>《GOT 表和 PLT 表》</a>这篇文章，它里面有一张图非常清晰。</p> <p><img alt=native_hook_plt_got2 src=/assets/images/android/native_hook_plt_got2.webp></p> <p>当第一次调用发生后，之后再调用函数 func 就高效简单很多。首先调用 PLT[n]，然后执行 jmp *GOT[n]。GOT[n]直接指向 func，这样就高效的完成了函数调用。</p> <p><img alt=native_hook_plt_got3 src=/assets/images/android/native_hook_plt_got3.webp></p> <p>总结一下，因为很多函数可能在程序执行完时都不会被用到，比如错误处理函数或一些用户很少用到的功能模块等，那么一开始把所有函数都链接好实际就是一种浪费。为了提升动态链接的性能，我们可以使用 PLT 来实现延迟绑定的功能。</p> <p>对于函数运行的实际地址，我们依然需要通过 GOT 表得到，整个简化过程如下：</p> <p><img alt=native_hook_plt_got4 src=/assets/images/android/native_hook_plt_got4.webp></p> <p>看到这里，相信你已经有了如何 Hack 这一过程的初步想法。这里业界通常会根据修改 PLT 记录或者 GOT 记录区分为 GOT Hook 和 PLT Hook，但其本质原理十分接近。</p> <h4 id=gotplt-hook>GOT/PLT Hook 实践<a class=headerlink href=#gotplt-hook title="Permanent link">&para;</a></h4> <p>GOT/PLT Hook 看似简单，但是实现起来也是有一些坑的，需要考虑兼容性的情况。一般来说，推荐使用业界的成熟方案。</p> <ul> <li>微信 Matrix 开源库的<a href=https://github.com/Tencent/matrix/tree/master/matrix/matrix-android/matrix-android-commons/src/main/cpp/elf_hook>ELF Hook</a>，它使用的是 GOT Hook，主要使用它来做性能监控。 <blockquote> <p>微信Matrix里面的hook已经换成了爱奇艺的xHook了</p> </blockquote> </li> <li>爱奇艺开源的的<a href=https://github.com/iqiyi/xHook>xHook</a>，它使用的也是 PLT Hook。</li> <li>Facebook 的<a href=https://github.com/facebookincubator/profilo/tree/master/deps/plthooks>PLT Hook</a>。</li> </ul> <p>如果不想深入它内部的原理，我们只需要直接使用这些开源的优秀方案就可以了。因为这种 Hook 方式非常成熟稳定，除了 Hook 线程的创建，我们还有很多其他的使用范例。</p> <ul> <li>“I/O 优化”中使用<a href=https://github.com/Tencent/matrix/tree/master/matrix/matrix-android/matrix-io-canary>matrix-io-canary</a> Hook 文件的操作。</li> <li>“网络优化”中使用 Hook 了 Socket 的相关操作，具体你可以参考<a href=https://github.com/AndroidAdvanceWithGeektime/Chapter17>Chapter17</a>。</li> </ul> <p>这种 Hook 方法也不是万能的，因为它只能替换导入函数的方式。有时候我们不一定可以找到这样的外部调用函数。如果想 Hook 函数的内部调用，这个时候就需要用到我们的 Trap Hook 或者 Inline Hook 了。</p> <h3 id=2-trap-hook>2. Trap Hook<a class=headerlink href=#2-trap-hook title="Permanent link">&para;</a></h3> <p>对于函数内部的 Hook，你可以先从头想一下，会发现调试器就具备一切 Hook 框架具有的能力，可以在目标函数前断住程序，修改内存、程序段，继续执行。相信很多同学都会使用调试器，但是对调试器如何工作却知之甚少。下面让我们先了解一下软件调试器是如何工作的。</p> <h4 id=ptrace>ptrace<a class=headerlink href=#ptrace title="Permanent link">&para;</a></h4> <p>一般软件调试器都是通过 ptrace 系统调用和 SIGTRAP 配合来进行断点调试，首先我们来了解一下什么是 ptrace，它又是如何断住程序运行，然后修改相关执行步骤的。</p> <p>所谓合格的底层程序员，对于未知知识的了解，第一步就是使用man命令来查看系统文档。</p> <blockquote> <p>The ptrace() system call provides a means by which one process (the “tracer”) may observe and control the execution of another process (the “tracee”), and examine and change the tracee’s memory and registers. It is primarily used to implement breakpoint debugging and system call tracing.</p> </blockquote> <p>这段话直译过来就是，ptrace 提供了一种让一个程序（tracer）观察或者控制另一个程序（tracee）执行流程，以及修改被控制程序内存和寄存器的方法，主要用于实现调试断点和系统调用跟踪。</p> <p>我们再来简单了解一下调试器（GDB/LLDB）是如何使用 ptrace 的。首先调试器会基于要调试进程是否已启动，来决定是使用 fork 或者 attach 到目标进程。当调试器与目标程序绑定后，目标程序的任何 signal（除 SIGKILL）都会被调试器做先拦截，调试器会有机会对相关信号进行处理，然后再把执行权限交由目标程序继续执行。可以你已经想到了，这其实已经达到了 Hook 的目的。</p> <h4 id=hook>如何 Hook<a class=headerlink href=#hook title="Permanent link">&para;</a></h4> <p>但更进一步思考，如果我们不需要修改内存或者做类似调试器一样复杂的交互，我们完全可以不依赖 ptrace，只需要接收相关 signal 即可。这时我们就想到了句柄（signal handler）。对！我们完全可以主动 raise signal，然后使用 signal handler 来实现类似的 Hook 效果。</p> <p>业界也有不少人将 Trap Hook 叫作断点 Hook，它的原理就是在需要 Hook 的地方想办法触发断点，并捕获异常。一般我们会利用 SIGTRAP 或者 SIGKILL（非法指令异常）这两种信号。下面以 SIGTRAP 信号为例，具体的实现步骤如下。</p> <p><img alt=native_hook_trap_signal src=/assets/images/android/native_hook_trap_signal.webp></p> <ul> <li>注册信号接收句柄（signal handler），不同的体系结构可能会选取不同的信号，我们这里用 SIGTRAP。</li> <li>在我们需要 Hook 得部分插入 Trap 指令。</li> <li>系统调用 Trap 指令，进入内核模式，调用我们已经在开始注册好的信号接收句柄（signal handler）。</li> <li>执行我们信号接收句柄（signal handler），这里需要注意，所有在信号接收句柄（signal handler）执行的代码需要保证<a href=http://man7.org/linux/man-pages/man7/signal-safety.7.html>async-signal-safe</a>。这里我们可以简单的只把信号接收句柄当作蹦床，使用 logjmp 跳出这个需要 async-signal-safe（正如我在“崩溃分析”所说的，部分函数在 signal 回调中使用并不安全）的环境，然后再执行我们 Hook 的代码。</li> <li>在执行完 Hook 的函数后，我们需要恢复现场。这里如果我们想继续调用原来的函数 A，那直接回写函数 A 的原始指令并恢复寄存器状态。</li> </ul> <h4 id=trap-hook>Trap Hook 实践<a class=headerlink href=#trap-hook title="Permanent link">&para;</a></h4> <p>Trap Hook 实践Trap Hook 兼容性非常好，它也可以在生产环境中大规模使用。但是它最大的问题是效率比较低，不适合 Hook 非常频繁调用的函数。</p> <p>对于 Trap Hook 的实践方案，在“<a href=https://time.geekbang.org/column/article/72642>卡顿优化（下）</a>”中，我提到过 Facebook 的<a href=https://github.com/facebookincubator/profilo>Profilo</a>，它就是通过定期发送 SIGPROF 信号来实现卡顿监控的。</p> <h3 id=3-inline-hook>3. Inline Hook<a class=headerlink href=#3-inline-hook title="Permanent link">&para;</a></h3> <p>跟 Trap Hook 一样，Inline Hook 也是函数内部调用的 Hook。它直接将函数开始（Prologue）处的指令更替为跳转指令，使得原函数直接跳转到 Hook 的目标函数函数，并保留原函数的调用接口以完成后续再调用回来的目的。</p> <p>与 GOT/PLT Hook 相比，Inline Hook 可以不受 GOT/PLT 表的限制，几乎可以 Hook 任何函数。不过其实现十分复杂，我至今没有见过可以用在生产环境的实现。并且在 ARM 体系结构下，无法对叶子函数和很短的函数进行 Hook。</p> <p>在深入“邪恶的”细节前，我们需要先对 Inline Hook 的大体流程有一个简单的了解。</p> <p><img alt=native_hook_inline_hook src=/assets/images/android/native_hook_inline_hook.webp></p> <p>如图所示，Inline Hook 的基本思路就是在已有的代码段中插入跳转指令，把代码的执行流程转向我们实现的 Hook 函数中，然后再进行指令修复，并跳转回原函数继续执行。这段描述看起来是不是十分简单而且清晰？</p> <p>对于 Trap Hook，我们只需要在目标地址前插入特殊指令，并且在执行结束后把原始指令写回去就可以了。但是对 Inline Hook 来说，它是直接进行指令级的复写与修复。怎么理解呢？就相当于我们在运行过程中要去做 ASM 的字节码修改。</p> <p>当然 Inline Hook 远远比 ASM 操作更加复杂，因为它还涉及不同 CPU 架构带来的指令集适配问题，我们需要根据不同指令集来分别进行指令复写与跳转。</p> <p>下面我先来简单说明一下 Android 常见的 CPU 架构和指令集：</p> <ul> <li><strong>x86 和 MIPS 架构</strong>。这两个架构已经基本没有多少用户了，我们可以直接忽视。一般来说我们只关心主流的 ARM 体系架构就可以了。</li> <li><strong>ARMv5 和 ARMv7 架构</strong>。它的指令集分为 4 字节对齐的定长的 ARM 指令集和 2 字节对齐的变长 Thumb/Thumb-2 指令集。Thumb-2 指令集虽为 2 字节对齐，但指令集本身有 16 位也有 32 位。其中 ARMv5 使用的是 16 位的 Thumb16，在 ARMv7 使用的是 32 位的 Thumb32。不过目前 ARMv5 也基本没有多少用户了，我们也可以放弃 Thumb16 指令集的适配。</li> <li><strong>ARMv8 架构</strong>。64 位的 ARMv8 架构可以兼容运行 32 位，所以它在 ARM32 和 Thumb32 指令集的基础上，增加了 ARM64 指令集。关于它们具体差异，你可以查看<a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0801b/IBAIEGDJ.html">ARM 的官方文档</a>。</li> </ul> <p>ARM64 目前我还没有适配，不过 Google Play 要求所有应用在 2019 年 8 月 1 日之前需要支持 64 位，所以今年上半年也要折腾一下。但它们的原理基本类似，下面我以最主流的 ARMv7 架构为例，为你庖丁解牛 Inline Hook。</p> <h4 id=arm32>ARM32 指令集<a class=headerlink href=#arm32 title="Permanent link">&para;</a></h4> <p>ARMv7 中有一种广为流传的<span class=arithmatex><span class=MathJax_Preview>PC=</span><script type=math/tex>PC=</script></span>PC+8的说法。这是指 ARMv7 中的三级流水线（取指、解码、执行），换句话说<span class=arithmatex><span class=MathJax_Preview>PC寄存器总是指向正在取指的指令，而不是指向正在执行的指令。取指总会比执行快 2 个指令，在 ARM32 指令集下 2 个指令的长度为 8 个字节，所以</span><script type=math/tex>PC寄存器总是指向正在取指的指令，而不是指向正在执行的指令。取指总会比执行快 2 个指令，在 ARM32 指令集下 2 个指令的长度为 8 个字节，所以</script></span>PC寄存器的值总是比当前指令地址要大 8。</p> <p><img alt=native_hook_armeabiv7 src=/assets/images/android/native_hook_armeabiv7.webp></p> <p>是不是感觉有些复杂，其实这是为了引出 ARM 指令集的常用跳转方法：LDR PC, [PC, #-4] ;0xE51FF004$TRAMPOLIN_ADDR</p> <div class=highlight><pre><span></span><code>LDR PC, [PC, #-4] ;0xE51FF004
$TRAMPOLIN_ADDR
</code></pre></div> <p>在了解了三级流水线以后，就不会对这个 PC-4 有什么疑惑了。</p> <p>按照我们前面描述的 Inline Hook 的基本步骤，首先插入跳转指令，跳入我们的蹦床（Trampoline），执行我们实现的 Hook 后函数。这里还有一个“邪恶的”细节，由于指令执行是依赖当前运行环境的，即所有寄存器的值，而我们插入新的指令是有可能更改寄存器的状态的，所以我们要保存当前全部的寄存器状态到栈中，使用 BLX 指令跳转执行 Hook 后函数，执行完成后，再从栈中恢复所有的寄存器，最后才能像未 Hook 一样继续执行原先函数。</p> <p><img alt=native_hook_restore_pc src=/assets/images/android/native_hook_restore_pc.webp></p> <p>在执行完 Hook 后的函数后，我们需要跳转回原先的函数继续执行。这里不要忘记我们在一开始覆盖的 LDR 指令，我们需要先执行被我们复写的指令，然后再使用如下指令，继续执行原先函数。</p> <div class=highlight><pre><span></span><code>LDR PC, [PC, #-4]
HOOKED_ADDR+8
</code></pre></div> <p>是不是有一种大功告成的感觉？其实这里还有一个巨大的坑在等着我们，那就是 <strong>指令修复</strong>。前面我提到保存并恢复了寄存器原有的状态，已达到可以继续像原有程序一样的继续执行。但仅仅是恢复寄存器就足够么？显然答案是否定的，虽然寄存器被我们完美恢复了，但是 2 条备份的指令被移动到了新的地址。当执行它们的时候，<span class=arithmatex><span class=MathJax_Preview>PC寄存器的值是与原先不同的。这条指令的操作如果涉及</span><script type=math/tex>PC寄存器的值是与原先不同的。这条指令的操作如果涉及</script></span>PC的值，那么它们将会执行出完全不同的结果。</p> <p>到这里我就不对指令修复再深入解析了，感兴趣的同学可以在留言区进行讨论。</p> <h4 id=inline-hook>Inline Hook 实践<a class=headerlink href=#inline-hook title="Permanent link">&para;</a></h4> <p>对于 Inline Hook，虽然它功能非常强大，而且执行效率也很高，但是业界目前还没有一套完全稳定可靠的开源方案。Inline Hook 一般会使用在自动化测试或者线上疑难问题的定位，例如“UI 优化”中说到 libhwui.so 崩溃问题的定位，我们就是利用 Inline Hook 去收集系统信息。</p> <p>业界也有一些不错的参考方案： - <a href=http://www.cydiasubstrate.com/ >Cydia Substrate</a>。在<a href=https://github.com/AndroidAdvanceWithGeektime/Chapter03>Chapter3</a>中，我们就使用它来 Hook 系统的内存分配函数。 - <a href=https://github.com/crmulliner/adbi>adbi</a>。支付宝在<a href=https://juejin.cn/post/6844903705028853767>GC 抑制</a>中使用的 Hook 框架，不过已经好几年没有更新了。</p> <h2 id=_2>各个流派的优缺点比较<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>最后我们再来总结一下不同的 Hook 方式的优缺点：</p> <ol> <li> <p>GOT/PLT Hook 是一个比较中庸的方案，有较好的性能，中等的实现难度，但其只能 Hook 动态库之间的调用的函数，并且无法 Hook 未导出的私有函数，而且只存在安装与卸载 2 种状态，一旦安装就会 Hook 所有函数调用。</p> </li> <li> <p>Trap Hook 最为稳定，但由于需要切换运行模式（R0/R3），且依赖内核的信号机制，导致性能很差。</p> </li> <li> <p>Inline Hook 是一个非常激进的方案，有很好的性能，并且也没有 PLT 作用域的限制，可以说是一个非常灵活、完美的方案。但其实现难度极高，我至今也没有看到可以部署在生产环境的 Inline Hook 方案，因为涉及指令修复，需要编译器的各种优化。</p> </li> </ol> <p><img alt=native_hook_difference src=/assets/images/android/native_hook_difference.webp></p> <p>但是需要注意，无论是哪一种 Hook 都只能 Hook 到应用自身的进程，我们无法替换系统或其他应用进程的函数执行。</p> <h2 id=_3>总结<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>总的来说 Native Hook 是一门非常底层的技术，它会涉及库文件编译、加载、链接等方方面面的知识，而且很多底层知识是与 Android 甚至移动平台无关的。在这一领域，做安全的同学可能会更有发言权，我来讲可能班门弄斧了。不过希望通过这篇文章，让你对看似黑科技的 Hook 有一个大体的了解，希望可以在自己的平时的工作中使用 Hook 来完成一些看似不可能的任务，比如修复系统 Bug、线上监控 Native 内存分配等。</p> <h2 id=_4>推荐文章<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>Native Hook 技术的确非常复杂，即使我们不懂得它的内部原理，我们也应该学会使用成熟的开源框架去实现一些功能。当然对于想进一步深入研究的同学，推荐你学习下面这些资料。</p> <ul> <li><a href=https://docs.oracle.com/cd/E37934_01/pdf/E36754.pdf>链接程序和库指南</a></li> <li><a href=https://item.jd.com/10067200.html>程序员的自我修养：链接、装载与库</a></li> <li><a href="https://search.jd.com/Search?keyword=%E9%93%BE%E6%8E%A5%E5%99%A8%E4%B8%8E%E5%8A%A0%E8%BD%BD%E5%99%A8&enc=utf-8">链接器和加载器 Linkers and Loaders</a></li> <li><a href=https://item.jd.com/12240585.html>Linux 二进制分析 Learning Linux Binary Analysis</a></li> </ul> <p>如果你对调试器的研究也非常有兴趣，强烈推荐<a href=https://eli.thegreenplace.net/ >Eli Bendersky</a>写的博客，里面有一系列非常优秀的底层知识文章。其中一些关于 debugger 的，感兴趣的同学可以去阅读，并亲手实现一个简单的调试器。</p> <ul> <li><a href=https://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1>how-debuggers-work-part-1</a></li> <li><a href=https://eli.thegreenplace.net/2011/01/27/how-debuggers-work-part-2-breakpoints>how-debuggers-work-part-2-breakpoints</a></li> <li><a href=https://eli.thegreenplace.net/2011/02/07/how-debuggers-work-part-3-debugging-information>how-debuggers-work-part-3-debugging-information</a></li> </ul> <details class=tip open=open> <summary>Name Mangling</summary> <p>C++函数名会有一个Name Mangling的机制。<br> <code>readelf -s xxx.so</code> 可以查看so里面的函数名，对于C++是mangling的。 MacOS 内置了 <code>c++filt</code> 可以进行 demangle：<br> <div class=highlight><pre><span></span><code>$ c++filt -n _ZNK3MapI10StringName3RefI8GDScriptE10ComparatorIS0_E16DefaultAllocatorE3hasERKS0_
Map&lt;StringName, Ref&lt;GDScript&gt;, Comparator&lt;StringName&gt;, DefaultAllocator&gt;::has<span class=o>(</span>StringName const<span class=p>&amp;</span><span class=o>)</span> const
</code></pre></div></p> </details> <h2 id=readelf>readelf指令<a class=headerlink href=#readelf title="Permanent link">&para;</a></h2> <p><strong>显示节头信息：readelf -S</strong></p> <div class=highlight><pre><span></span><code><span class=nv>$readelf</span> -S &lt;library&gt;
There are <span class=m>39</span> section headers, starting at offset 0x108a3c:

Section Headers:
  <span class=o>[</span>Nr<span class=o>]</span> Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  <span class=o>[</span> <span class=m>0</span><span class=o>]</span>                   NULL            <span class=m>00000000</span> <span class=m>000000</span> <span class=m>000000</span> <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>0</span>
  <span class=o>[</span> <span class=m>1</span><span class=o>]</span> .note.android.ide NOTE            <span class=m>00000134</span> <span class=m>000134</span> <span class=m>000098</span> <span class=m>00</span>   A  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span> <span class=m>2</span><span class=o>]</span> .note.gnu.build-i NOTE            000001cc 0001cc <span class=m>000024</span> <span class=m>00</span>   A  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span> <span class=m>3</span><span class=o>]</span> .dynsym           DYNSYM          000001f0 0001f0 0020d0 <span class=m>10</span>   A  <span class=m>4</span>   <span class=m>1</span>  <span class=m>4</span>
  <span class=o>[</span> <span class=m>4</span><span class=o>]</span> .dynstr           STRTAB          000022c0 0022c0 0027fc <span class=m>00</span>   A  <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span> <span class=m>5</span><span class=o>]</span> .gnu.hash         GNU_HASH        00004abc 004abc 000d70 <span class=m>04</span>   A  <span class=m>3</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span> <span class=m>6</span><span class=o>]</span> .hash             HASH            0000582c 00582c <span class=m>001060</span> <span class=m>04</span>   A  <span class=m>3</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span> <span class=m>7</span><span class=o>]</span> .gnu.version      VERSYM          0000688c 00688c 00041a <span class=m>02</span>   A  <span class=m>3</span>   <span class=m>0</span>  <span class=m>2</span>
  <span class=o>[</span> <span class=m>8</span><span class=o>]</span> .gnu.version_d    VERDEF          00006ca8 006ca8 00001c <span class=m>00</span>   A  <span class=m>4</span>   <span class=m>1</span>  <span class=m>4</span>
  <span class=o>[</span> <span class=m>9</span><span class=o>]</span> .gnu.version_r    VERNEED         00006cc4 006cc4 <span class=m>000040</span> <span class=m>00</span>   A  <span class=m>4</span>   <span class=m>2</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>10</span><span class=o>]</span> .rel.dyn          REL             00006d04 006d04 002c68 <span class=m>08</span>   A  <span class=m>3</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>11</span><span class=o>]</span> .rel.plt          REL             0000996c 00996c <span class=m>000680</span> <span class=m>08</span>   A  <span class=m>3</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>12</span><span class=o>]</span> .plt              PROGBITS        00009fec 009fec 0009d4 <span class=m>00</span>  AX  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>13</span><span class=o>]</span> .text             PROGBITS        0000a9c0 00a9c0 00e874 <span class=m>00</span>  AX  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>14</span><span class=o>]</span> .ARM.exidx        ARM_EXIDX       <span class=m>00019234</span> <span class=m>019234</span> <span class=m>001190</span> <span class=m>08</span>  AL <span class=m>13</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>15</span><span class=o>]</span> .ARM.extab        PROGBITS        0001a3c4 01a3c4 <span class=m>001514</span> <span class=m>00</span>   A  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>16</span><span class=o>]</span> .rodata           PROGBITS        0001b8d8 01b8d8 002e68 <span class=m>00</span>   A  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>17</span><span class=o>]</span> .data.rel.ro      PROGBITS        <span class=m>00020384</span> 01f384 <span class=m>001768</span> <span class=m>00</span>  WA  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>18</span><span class=o>]</span> .fini_array       FINI_ARRAY      00021aec 020aec <span class=m>000008</span> <span class=m>00</span>  WA  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>19</span><span class=o>]</span> .init_array       INIT_ARRAY      00021af4 020af4 <span class=m>000008</span> <span class=m>00</span>  WA  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>20</span><span class=o>]</span> .dynamic          DYNAMIC         00021afc 020afc <span class=m>000130</span> <span class=m>08</span>  WA  <span class=m>4</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>21</span><span class=o>]</span> .got              PROGBITS        00021c2c 020c2c 0003d4 <span class=m>00</span>  WA  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>22</span><span class=o>]</span> .data             PROGBITS        <span class=m>00022000</span> <span class=m>021000</span> 00008c <span class=m>00</span>  WA  <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>23</span><span class=o>]</span> .bss              NOBITS          <span class=m>00022090</span> <span class=m>021090</span> <span class=m>000269</span> <span class=m>00</span>  WA  <span class=m>0</span>   <span class=m>0</span> <span class=m>16</span>
  <span class=o>[</span><span class=m>24</span><span class=o>]</span> .comment          PROGBITS        <span class=m>00000000</span> 02108c 0000b6 <span class=m>01</span>  MS  <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>25</span><span class=o>]</span> .debug_str        PROGBITS        <span class=m>00000000</span> <span class=m>021142</span> 02bacc <span class=m>01</span>  MS  <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>26</span><span class=o>]</span> .debug_loc        PROGBITS        <span class=m>00000000</span> 04cc0e <span class=m>016891</span> <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>27</span><span class=o>]</span> .debug_abbrev     PROGBITS        <span class=m>00000000</span> 06349f 0050b9 <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>28</span><span class=o>]</span> .debug_info       PROGBITS        <span class=m>00000000</span> <span class=m>068558</span> <span class=m>045947</span> <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>29</span><span class=o>]</span> .debug_ranges     PROGBITS        <span class=m>00000000</span> 0ade9f 002e60 <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>30</span><span class=o>]</span> .debug_macinfo    PROGBITS        <span class=m>00000000</span> 0b0cff 00001f <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>31</span><span class=o>]</span> .debug_frame      PROGBITS        <span class=m>00000000</span> 0b0d20 <span class=m>004984</span> <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>32</span><span class=o>]</span> .debug_line       PROGBITS        <span class=m>00000000</span> 0b56a4 <span class=m>017861</span> <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>33</span><span class=o>]</span> .debug_aranges    PROGBITS        <span class=m>00000000</span> 0ccf08 0000a0 <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>8</span>
  <span class=o>[</span><span class=m>34</span><span class=o>]</span> .note.gnu.gold-ve NOTE            <span class=m>00000000</span> 0ccfa8 00001c <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>35</span><span class=o>]</span> .ARM.attributes   ARM_ATTRIBUTES  <span class=m>00000000</span> 0ccfc4 <span class=m>000036</span> <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>36</span><span class=o>]</span> .symtab           SYMTAB          <span class=m>00000000</span> 0ccffc 02c3b0 <span class=m>10</span>     <span class=m>37</span> <span class=m>10799</span>  <span class=m>4</span>
  <span class=o>[</span><span class=m>37</span><span class=o>]</span> .strtab           STRTAB          <span class=m>00000000</span> 0f93ac 00f4f0 <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
  <span class=o>[</span><span class=m>38</span><span class=o>]</span> .shstrtab         STRTAB          <span class=m>00000000</span> 10889c 0001a0 <span class=m>00</span>      <span class=m>0</span>   <span class=m>0</span>  <span class=m>1</span>
Key to Flags:
  W <span class=o>(</span>write<span class=o>)</span>, A <span class=o>(</span>alloc<span class=o>)</span>, X <span class=o>(</span>execute<span class=o>)</span>, M <span class=o>(</span>merge<span class=o>)</span>, S <span class=o>(</span>strings<span class=o>)</span>, I <span class=o>(</span>info<span class=o>)</span>,
  L <span class=o>(</span>link order<span class=o>)</span>, O <span class=o>(</span>extra OS processing required<span class=o>)</span>, G <span class=o>(</span>group<span class=o>)</span>, T <span class=o>(</span>TLS<span class=o>)</span>,
  C <span class=o>(</span>compressed<span class=o>)</span>, x <span class=o>(</span>unknown<span class=o>)</span>, o <span class=o>(</span>OS specific<span class=o>)</span>, E <span class=o>(</span>exclude<span class=o>)</span>,
  y <span class=o>(</span>noread<span class=o>)</span>, p <span class=o>(</span>processor specific<span class=o>)</span>
</code></pre></div> <p><strong>查看库的依赖: readelf -d</strong></p> <div class=highlight><pre><span></span><code><span class=nv>$readelf</span> -d &lt;library&gt; <span class=p>|</span> grep NEEDED
Dynamic section at offset 0x20afc contains <span class=m>33</span> entries:
  Tag        Type                         Name/Value
 0x00000003 <span class=o>(</span>PLTGOT<span class=o>)</span>                     0x21cb4
 0x00000002 <span class=o>(</span>PLTRELSZ<span class=o>)</span>                   <span class=m>1664</span> <span class=o>(</span>bytes<span class=o>)</span>
 0x00000017 <span class=o>(</span>JMPREL<span class=o>)</span>                     0x996c
 0x00000014 <span class=o>(</span>PLTREL<span class=o>)</span>                     REL
 0x00000011 <span class=o>(</span>REL<span class=o>)</span>                        0x6d04
 0x00000012 <span class=o>(</span>RELSZ<span class=o>)</span>                      <span class=m>11368</span> <span class=o>(</span>bytes<span class=o>)</span>
 0x00000013 <span class=o>(</span>RELENT<span class=o>)</span>                     <span class=m>8</span> <span class=o>(</span>bytes<span class=o>)</span>
 0x6ffffffa <span class=o>(</span>RELCOUNT<span class=o>)</span>                   <span class=m>947</span>
 0x00000006 <span class=o>(</span>SYMTAB<span class=o>)</span>                     0x1f0
 0x0000000b <span class=o>(</span>SYMENT<span class=o>)</span>                     <span class=m>16</span> <span class=o>(</span>bytes<span class=o>)</span>
 0x00000005 <span class=o>(</span>STRTAB<span class=o>)</span>                     0x22c0
 0x0000000a <span class=o>(</span>STRSZ<span class=o>)</span>                      <span class=m>10236</span> <span class=o>(</span>bytes<span class=o>)</span>
 0x6ffffef5 <span class=o>(</span>GNU_HASH<span class=o>)</span>                   0x4abc
 0x00000004 <span class=o>(</span>HASH<span class=o>)</span>                       0x582c
 0x00000001 <span class=o>(</span>NEEDED<span class=o>)</span>                     Shared library: <span class=o>[</span>libwebp-decoder.so<span class=o>]</span>
 0x00000001 <span class=o>(</span>NEEDED<span class=o>)</span>                     Shared library: <span class=o>[</span>libjnigraphics.so<span class=o>]</span>
 0x00000001 <span class=o>(</span>NEEDED<span class=o>)</span>                     Shared library: <span class=o>[</span>liblog.so<span class=o>]</span>
 0x00000001 <span class=o>(</span>NEEDED<span class=o>)</span>                     Shared library: <span class=o>[</span>libdl.so<span class=o>]</span>
 0x00000001 <span class=o>(</span>NEEDED<span class=o>)</span>                     Shared library: <span class=o>[</span>libm.so<span class=o>]</span>
 0x00000001 <span class=o>(</span>NEEDED<span class=o>)</span>                     Shared library: <span class=o>[</span>libc.so<span class=o>]</span>
 0x0000000e <span class=o>(</span>SONAME<span class=o>)</span>                     Library soname: <span class=o>[</span>libframesequence.so<span class=o>]</span>
 0x0000001a <span class=o>(</span>FINI_ARRAY<span class=o>)</span>                 0x21aec
 0x0000001c <span class=o>(</span>FINI_ARRAYSZ<span class=o>)</span>               <span class=m>8</span> <span class=o>(</span>bytes<span class=o>)</span>
 0x00000019 <span class=o>(</span>INIT_ARRAY<span class=o>)</span>                 0x21af4
 0x0000001b <span class=o>(</span>INIT_ARRAYSZ<span class=o>)</span>               <span class=m>8</span> <span class=o>(</span>bytes<span class=o>)</span>
 0x0000001e <span class=o>(</span>FLAGS<span class=o>)</span>                      BIND_NOW
 0x6ffffffb <span class=o>(</span>FLAGS_1<span class=o>)</span>                    Flags: NOW
 0x6ffffff0 <span class=o>(</span>VERSYM<span class=o>)</span>                     0x688c
 0x6ffffffc <span class=o>(</span>VERDEF<span class=o>)</span>                     0x6ca8
 0x6ffffffd <span class=o>(</span>VERDEFNUM<span class=o>)</span>                  <span class=m>1</span>
 0x6ffffffe <span class=o>(</span>VERNEED<span class=o>)</span>                    0x6cc4
 0x6fffffff <span class=o>(</span>VERNEEDNUM<span class=o>)</span>                 <span class=m>2</span>
 0x00000000 <span class=o>(</span>NULL<span class=o>)</span>                       0x0
</code></pre></div> <hr> <div class=md-source-file> <small> 最后更新: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 8, 2021</span> </small> </div> <!-- Giscus --> <h2 id=__comments>评论</h2> <!-- Replace with generated snippet --> <script src=https://giscus.app/client.js data-repo=YorekLiu/yorekliu.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxMTQwNzYzODQ=" data-category=Announcements data-category-id=DIC_kwDOBsyq4M4CP9fq data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN crossorigin=anonymous async>
</script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script> </article> </div> </div> <a href=# class="md-top md-top--hidden md-icon" data-md-component=top> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=页脚> <a href=../bytecode/ class="md-footer__link md-footer__link--prev" aria-label="上一页: 27 | 编译插桩的三种方法：AspectJ、ASM、ReDex" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> 27 | 编译插桩的三种方法：AspectJ、ASM、ReDex </div> </div> </a> <a href=../../../../design-pattern/design-pattern/ class="md-footer__link md-footer__link--next" aria-label="下一页: 设计模式概述" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> 设计模式概述 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2022 Yorek </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/YorekLiu target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top", "navigation.tracking", "navigation.expand", "search.suggest", "search.highlight", "search.share"], "search": "../../../../assets/javascripts/workers/search.b028fd86.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../../assets/javascripts/bundle.7f366e99.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>