<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An Android Developer."><meta name=author content="Yorek Liu"><link href=https://blog.yorek.xyz/android/paid/zsxq/week22-android-studio-build/ rel=canonical><link rel=icon href=../../../../assets/images/favicon.webp><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.0"><title>Android Studio build过程 - Yorek's</title><link rel=stylesheet href=../../../../assets/stylesheets/main.33e2939f.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.ef6f36e2.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,400,400i,700%7CJetBrains+Mono&display=fallback"><style>:root{--md-text-font-family:"Noto Sans SC";--md-code-font-family:"JetBrains Mono"}</style><link rel=manifest href=../../../../manifest.webmanifest crossorigin=use-credentials><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-155096376-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=blue> <script>function __prefix(e){return new URL("../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#the-build-process class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="Yorek's" class="md-header__button md-logo" aria-label="Yorek's" data-md-component=logo> <img src=../../../../assets/images/favicon.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Yorek's </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Android Studio build过程 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=blue type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=deep-orange type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../3rd-library/3rd-library-source-code/ class="md-tabs__link md-tabs__link--active"> Android </a> </li> <li class=md-tabs__item> <a href=../../../../flutter/flutter_first_project_1/ class=md-tabs__link> Flutter </a> </li> <li class=md-tabs__item> <a href=../../../../leetcode/ class=md-tabs__link> LeetCode </a> </li> <li class=md-tabs__item> <a href=../../../../design-pattern/design-pattern/ class=md-tabs__link> Books </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Yorek's" class="md-nav__button md-logo" aria-label="Yorek's" data-md-component=logo> <img src=../../../../assets/images/favicon.webp alt=logo> </a> Yorek's </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1> Android <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Android data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Android </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_1 type=checkbox id=__nav_1_1> <label class=md-nav__link for=__nav_1_1> 三方库系列 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=三方库系列 data-md-level=2> <label class=md-nav__title for=__nav_1_1> <span class="md-nav__icon md-icon"></span> 三方库系列 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../3rd-library/3rd-library-source-code/ class=md-nav__link> Android三方库源码分析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix/ class=md-nav__link> 微信APM Matrix解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-trace/ class=md-nav__link> Matrix-TraceCanary解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-io/ class=md-nav__link> Matrix-IOCanary解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-resource/ class=md-nav__link> Matrix-ResourceCanary解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/matrix-sqlitelint/ class=md-nav__link> Matrix-SQLiteLint解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/okhttp/ class=md-nav__link> OkHttp3源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/retrofit/ class=md-nav__link> Retrofit2源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/rxjava%26rxandroid/ class=md-nav__link> RxJava源码解析及使用实例 </a> </li> <li class=md-nav__item> <a href=../../../other/RxJava/ class=md-nav__link> RxJava操作符大全 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide1/ class=md-nav__link> Glide v4 源码解析（一） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide2/ class=md-nav__link> Glide v4 源码解析（二） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide3/ class=md-nav__link> Glide v4 源码解析（三） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide4/ class=md-nav__link> Glide v4 源码解析（四） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide5/ class=md-nav__link> Glide v4 源码解析（五） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide6/ class=md-nav__link> Glide v4 源码解析（六） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/glide7/ class=md-nav__link> Glide v4 源码解析（七） </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/migrate-to-glide/ class=md-nav__link> 杂记：从Picasso迁移至Glide </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/eventbus/ class=md-nav__link> EventBus源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/leakcanary/ class=md-nav__link> LeakCanary2源码解析 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/permissiondispatcher/ class=md-nav__link> PermissionDispatcher源码解析 </a> </li> <li class=md-nav__item> <a href=../../../other/constraintlayout/ class=md-nav__link> ConstraintLayout使用大全 </a> </li> <li class=md-nav__item> <a href=../../../other/dagger2/ class=md-nav__link> 初学者的Dagger2教程 </a> </li> <li class=md-nav__item> <a href=../../../3rd-library/hotfix/ class=md-nav__link> Hotfix方案初探 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_2 type=checkbox id=__nav_1_2> <label class=md-nav__link for=__nav_1_2> framework系列 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=framework系列 data-md-level=2> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> framework系列 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%281%29/ class=md-nav__link> Activity </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%282%29/ class=md-nav__link> Service </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%283%29/ class=md-nav__link> Broadcasts </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%284%29/ class=md-nav__link> Content Providers与Fragment </a> </li> <li class=md-nav__item> <a href=../../../framework/IPC%E6%9C%BA%E5%88%B6/ class=md-nav__link> IPC机制 </a> </li> <li class=md-nav__item> <a href=../../../framework/View%E7%9A%84%E4%BA%8B%E4%BB%B6%E4%BD%93%E7%B3%BB/ class=md-nav__link> View的事件体系 </a> </li> <li class=md-nav__item> <a href=../../../framework/View%E7%9A%84%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/ class=md-nav__link> View的绘制原理 </a> </li> <li class=md-nav__item> <a href=../../../framework/RemoteViews/ class=md-nav__link> RemoteViews </a> </li> <li class=md-nav__item> <a href=../../../framework/Drawable/ class=md-nav__link> Android中的Drawable资源 </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E5%8A%A8%E7%94%BB/ class=md-nav__link> Android动画 </a> </li> <li class=md-nav__item> <a href=../../../framework/Window%E4%B8%8EWindowManager/ class=md-nav__link> Window与WindowManager </a> </li> <li class=md-nav__item> <a href=../../../framework/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/ class=md-nav__link> 四大组件启动过程 </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6/ class=md-nav__link> Android消息机制 </a> </li> <li class=md-nav__item> <a href=../../../framework/Android%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0/ class=md-nav__link> Android线程与线程池 </a> </li> <li class=md-nav__item> <a href=../../../framework/Bitmap%E7%9A%84%E7%BC%93%E5%AD%98%E4%B8%8E%E5%8A%A0%E8%BD%BD/ class=md-nav__link> Bitmap的缓存与加载 </a> </li> <li class=md-nav__item> <a href=../../../framework/JNI%E4%B8%8ENDK/ class=md-nav__link> JNI与NDK编程简介 </a> </li> <li class=md-nav__item> <a href=../../../framework/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=md-nav__link> Android性能优化 </a> </li> <li class=md-nav__item> <a href=../../../framework/binder1-mediaservice/ class=md-nav__link> Binder深入理解——以MediaService为例 </a> </li> <li class=md-nav__item> <a href=../../../framework/binder2/ class=md-nav__link> Binder深入理解——罗老师系列 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_3 type=checkbox id=__nav_1_3 checked> <label class=md-nav__link for=__nav_1_3> 杂记 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=杂记 data-md-level=2> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> 杂记 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../other/commands/ class=md-nav__link> Android开发常见命令 </a> </li> <li class=md-nav__item> <a href=../../../other/android-tv/ class=md-nav__link> Android TV 专项 </a> </li> <li class=md-nav__item> <a href=../../../other/annotation/ class=md-nav__link> 注解的定义及解析 </a> </li> <li class=md-nav__item> <a href=../../../other/best_throttle_in_mvvm/ class=md-nav__link> 这可能是MVVM中最优雅的按键防抖方案 </a> </li> <li class=md-nav__item> <a href=../../../other/android-jenkins/ class=md-nav__link> Jenkins for android </a> </li> <li class=md-nav__item> <a href=../../../other/SystemProrities/ class=md-nav__link> 普通Android程序使用SystemProrities </a> </li> <li class=md-nav__item> <a href=../../../other/recyclerview-cache/ class=md-nav__link> ListView、RecyclerView缓存策略解析 </a> </li> <li class=md-nav__item> <a href=../../../other/recyclerview-item-docoration/ class=md-nav__link> RecyclerView高级特性——ItemDecoration </a> </li> <li class=md-nav__item> <a href=../../../other/recyclerview-others/ class=md-nav__link> RecyclerView的一些使用细节 </a> </li> <li class=md-nav__item> <a href=../../../other/RecyclerView-Sort%26Delete/ class=md-nav__link> RecyclerView高级特性——拖拽排序以及滑动删除 </a> </li> <li class=md-nav__item> <a href=../../../other/FAB-Behavior/ class=md-nav__link> FloatingActionButton上滑隐藏下滑显示 </a> </li> <li class=md-nav__item> <a href=../../../other/nestedscrolling/ class=md-nav__link> NestedScrolling机制 </a> </li> <li class=md-nav__item> <a href=../../../other/porterduff/ class=md-nav__link> 使用Porter-Duff合成数字图像 </a> </li> <li class=md-nav__item> <a href=../../../other/runtime/ class=md-nav__link> Android Runtime </a> </li> <li class=md-nav__item> <a href=../../../other/android_alias/ class=md-nav__link> Android马甲包的那些事儿 </a> </li> <li class=md-nav__item> <a href=../../../other/Android-Development-Tool/ class=md-nav__link> Android神兵利器 </a> </li> <li class=md-nav__item> <a href=../../../other/FileProvider/ class=md-nav__link> FileProvider </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E5%88%A4%E6%96%AD%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%AB%98%E5%BA%A6/ class=md-nav__link> Android判断虚拟按键(导航栏)显示与否、高度以及获取屏幕实际高度 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E5%9B%BE%E7%89%87%E9%80%89%E6%8B%A9%E5%99%A8/ class=md-nav__link> Android图片选择器 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F%E6%A1%86%E6%9E%B6/ class=md-nav__link> Android原生底部导航栏 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E6%90%9C%E7%B4%A2%E6%A0%8F%E7%9A%84%E5%AE%9E%E7%8E%B0/ class=md-nav__link> Android搜索栏的实现 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E6%9A%82%E5%81%9C%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8%E7%9A%84%E6%92%AD%E6%94%BE/ class=md-nav__link> Android暂停酷狗、网易云音乐等音乐播放器的播放 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E6%BB%91%E5%8A%A8%E8%BF%94%E5%9B%9E%E5%AE%9E%E8%B7%B5/ class=md-nav__link> Android滑动返回实践 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E7%A8%8B%E5%BA%8F%E5%8F%8D%E7%BC%96%E8%AF%91/ class=md-nav__link> MacOS下Android程序反编译 </a> </li> <li class=md-nav__item> <a href=../../../other/Android%E9%80%9A%E8%AE%AF%E5%BD%95%E5%BF%AB%E9%80%9F%E8%AF%BB%E5%8F%96/ class=md-nav__link> Android通讯录快速读取 </a> </li> <li class=md-nav__item> <a href=../../../other/soft-keyboard-in-app/ class=md-nav__link> App内自定义软键盘 </a> </li> <li class=md-nav__item> <a href=../../../other/%E8%85%BE%E8%AE%AFX5%E5%86%85%E6%A0%B8%E5%85%A5%E5%9D%91%E6%8C%87%E5%8D%97/ class=md-nav__link> 腾讯TBS X5浏览器内核入坑指南 </a> </li> <li class=md-nav__item> <a href=../../../other/%E7%90%90%E7%A2%8E%E7%9F%A5%E8%AF%86%E7%82%B9/ class=md-nav__link> 琐碎知识点 </a> </li> <li class=md-nav__item> <a href=../week1-synchronized/ class=md-nav__link> 理解Java中synchronized关键词 </a> </li> <li class=md-nav__item> <a href=../week2-service/ class=md-nav__link> 理解Service </a> </li> <li class=md-nav__item> <a href=../week3-activity/ class=md-nav__link> 理解Activity的启动模式 </a> </li> <li class=md-nav__item> <a href=../week4-startActivityForResult/ class=md-nav__link> 关于startActivityForResult </a> </li> <li class=md-nav__item> <a href=../week5-view/ class=md-nav__link> 关于View的知识 </a> </li> <li class=md-nav__item> <a href=../week6-gradle/ class=md-nav__link> 关于Gradle的知识 </a> </li> <li class=md-nav__item> <a href=../week7-serialization/ class=md-nav__link> 关于序列化的知识 </a> </li> <li class=md-nav__item> <a href=../week10-classloader/ class=md-nav__link> Android中的ClassLoader </a> </li> <li class=md-nav__item> <a href=../week11-binder/ class=md-nav__link> Binder简介 </a> </li> <li class=md-nav__item> <a href=../week12-retrofit-okhttp/ class=md-nav__link> OkHttp和Retrofit的作用以及两者之间的联系 </a> </li> <li class=md-nav__item> <a href=../week14-jvm-gc/ class=md-nav__link> JVM中垃圾回收策略 </a> </li> <li class=md-nav__item> <a href=../week16-keep-app-alive/ class=md-nav__link> 进程保活 </a> </li> <li class=md-nav__item> <a href=../week17-android-components/ class=md-nav__link> 四大组件的作用以及多进程 </a> </li> <li class=md-nav__item> <a href=../week20-network-protocol/ class=md-nav__link> 网络协议 </a> </li> <li class=md-nav__item> <a href=../week21-mvc%26mvp%26mvvm/ class=md-nav__link> MVC、MVP和MVVM </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Android Studio build过程 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Android Studio build过程 </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-build-process class=md-nav__link> The build process </a> </li> <li class=md-nav__item> <a href=#proguard-r8 class=md-nav__link> ProGuard &amp; R8 </a> <nav class=md-nav aria-label="ProGuard & R8"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 启用压缩、混淆以及优化 </a> <nav class=md-nav aria-label=启用压缩、混淆以及优化> <ul class=md-nav__list> <li class=md-nav__item> <a href=#r8 class=md-nav__link> R8配置文件 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 额外配置 </a> <nav class=md-nav aria-label=额外配置> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 代码压缩 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#keep class=md-nav__link> 自定义需要keep的代码 </a> <nav class=md-nav aria-label=自定义需要keep的代码> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 压缩资源 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#keep_1 class=md-nav__link> 自定义需要keep的资源 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 启用严格引用检查 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 移除无用的替代资源 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 合并重复资源 </a> <nav class=md-nav aria-label=合并重复资源> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 代码混淆 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 代码优化 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 启用更激进的优化 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gradlew class=md-nav__link> gradlew命令 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../week23-load-large-bitmap/ class=md-nav__link> 大尺寸图片加载问题 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_4 type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4> Android开发高手课 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Android开发高手课 data-md-level=2> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Android开发高手课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../master/ class=md-nav__link> Android开发高手课 </a> </li> <li class=md-nav__item> <a href=../../master/crash_1/ class=md-nav__link> 01 | 崩溃优化（上）：关于“崩溃”那些事儿 </a> </li> <li class=md-nav__item> <a href=../../master/crash_2/ class=md-nav__link> 02 | 崩溃优化（下）：应用崩溃了，你应该如何去分析？ </a> </li> <li class=md-nav__item> <a href=../../master/memory_1/ class=md-nav__link> 03 | 内存优化（上）：4GB内存时代，再谈内存优化 </a> </li> <li class=md-nav__item> <a href=../../master/memory_2/ class=md-nav__link> 04 | 内存优化（下）：内存优化这件事，应该从哪里着手？ </a> </li> <li class=md-nav__item> <a href=../../master/stuck_1/ class=md-nav__link> 05 | 卡顿优化（上）：你要掌握的卡顿分析方法 </a> </li> <li class=md-nav__item> <a href=../../master/stuck_2/ class=md-nav__link> 06 | 卡顿优化（下）：如何监控应用卡顿？ </a> </li> <li class=md-nav__item> <a href=../../master/stuck_3/ class=md-nav__link> 06补充篇 | 卡顿优化：卡顿现场与卡顿分析 </a> </li> <li class=md-nav__item> <a href=../../master/start_1/ class=md-nav__link> 07 | 启动优化（上）：从启动过程看启动速度优化 </a> </li> <li class=md-nav__item> <a href=../../master/start_2/ class=md-nav__link> 08 | 启动优化（下）：优化启动速度的进阶方法 </a> </li> <li class=md-nav__item> <a href=../../master/io_1/ class=md-nav__link> 09 | I/O优化（上）：开发工程师必备的I/O优化知识 </a> </li> <li class=md-nav__item> <a href=../../master/io_2/ class=md-nav__link> 10 | I/O优化（中）：不同I/O方式的使用场景是什么？ </a> </li> <li class=md-nav__item> <a href=../../master/io_3/ class=md-nav__link> 11 | I/O优化（下）：如何监控线上I/O操作？ </a> </li> <li class=md-nav__item> <a href=../../master/storage_1/ class=md-nav__link> 12 | 存储优化（上）：常见的数据存储方法有哪些？ </a> </li> <li class=md-nav__item> <a href=../../master/storage_2/ class=md-nav__link> 13 | 存储优化（中）：如何优化数据存储？ </a> </li> <li class=md-nav__item> <a href=../../master/storage_3/ class=md-nav__link> 14 | 存储优化（下）：数据库SQLite的使用和优化 </a> </li> <li class=md-nav__item> <a href=../../master/network_1/ class=md-nav__link> 15 | 网络优化（上）：移动开发工程师必备的网络优化知识 </a> </li> <li class=md-nav__item> <a href=../../master/network_2/ class=md-nav__link> 16 | 网络优化（中）：复杂多变的移动网络该如何优化？ </a> </li> <li class=md-nav__item> <a href=../../master/network_3/ class=md-nav__link> 17 | 网络优化（下）：大数据下网络该如何监控？ </a> </li> <li class=md-nav__item> <a href=../../master/battery_1/ class=md-nav__link> 18 | 耗电优化（上）：从电量优化的演进看耗电分析 </a> </li> <li class=md-nav__item> <a href=../../master/battery_2/ class=md-nav__link> 19 | 耗电优化（下）：耗电的优化方法与线上监控 </a> </li> <li class=md-nav__item> <a href=../../master/ui_1/ class=md-nav__link> 20 | UI 优化（上）：UI 渲染的几个关键概念 </a> </li> <li class=md-nav__item> <a href=../../master/ui_2/ class=md-nav__link> 21 | UI 优化（下）：如何优化 UI 渲染？ </a> </li> <li class=md-nav__item> <a href=../../master/package_1/ class=md-nav__link> 22 | 包体积优化（上）：如何减少安装包大小？ </a> </li> <li class=md-nav__item> <a href=../../master/package_2/ class=md-nav__link> 23 | 包体积优化（下）：资源优化的进阶实践 </a> </li> <li class=md-nav__item> <a href=../../master/compile/ class=md-nav__link> 26 | 关于编译，你需要了解什么？ </a> </li> <li class=md-nav__item> <a href=../../master/bytecode/ class=md-nav__link> 27 | 编译插桩的三种方法：AspectJ、ASM、ReDex </a> </li> <li class=md-nav__item> <a href=../../master/native_hook/ class=md-nav__link> 35 | Native Hook 技术，天使还是魔鬼？ </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Flutter <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Flutter data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Flutter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_1/ class=md-nav__link> 年轻人的第一个Flutter程序(1) </a> </li> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_2/ class=md-nav__link> 年轻人的第一个Flutter程序(2) </a> </li> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_3/ class=md-nav__link> 年轻人的第一个Flutter程序(3) </a> </li> <li class=md-nav__item> <a href=../../../../flutter/flutter_first_project_4/ class=md-nav__link> 年轻人的第一个Flutter程序(4) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> LeetCode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=LeetCode data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> LeetCode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../leetcode/ class=md-nav__link> 算法目录 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_1/ class=md-nav__link> 数据结构、算法和数据操作 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_3/ class=md-nav__link> 高质量的代码 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_4/ class=md-nav__link> 解决问题的思路 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_5/ class=md-nav__link> 优化时间和空间效率 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/code_interviews_6/ class=md-nav__link> 面试中的各项能力 </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/array/ class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode1-10/ class=md-nav__link> LeetCode(1-10) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode11-20/ class=md-nav__link> LeetCode(11-20) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode21-30/ class=md-nav__link> LeetCode(21-30) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode31-40/ class=md-nav__link> LeetCode(31-40) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode41-50/ class=md-nav__link> LeetCode(41-50) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode51-60/ class=md-nav__link> LeetCode(51-60) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode61-70/ class=md-nav__link> LeetCode(61-70) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode71-80/ class=md-nav__link> LeetCode(71-80) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode81-90/ class=md-nav__link> LeetCode(81-90) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode91-100/ class=md-nav__link> LeetCode(91-100) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode101-110/ class=md-nav__link> LeetCode(101-110) </a> </li> <li class=md-nav__item> <a href=../../../../leetcode/leetcode111-120/ class=md-nav__link> LeetCode(111-120) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Books <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Books data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> Design Pattern <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Design Pattern" data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Design Pattern </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../design-pattern/design-pattern/ class=md-nav__link> 设计模式概述 </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/design-principle/ class=md-nav__link> 面向对象的六大原则 </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/singleton/ class=md-nav__link> 单例模式(Singleton) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/builder/ class=md-nav__link> 建造者模式(Builder) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/prototype/ class=md-nav__link> 原型模式(Prototype) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/factory-method/ class=md-nav__link> 工厂方法模式(Factory method) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/abstract-factory/ class=md-nav__link> 抽象工厂模式(Abstract factory) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/proxy/ class=md-nav__link> 代理模式(Proxy) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/composite/ class=md-nav__link> 组合模式(Composite) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/adapter/ class=md-nav__link> 适配器模式(Adapter) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/decorator/ class=md-nav__link> 装饰模式(Decorator) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/flyweight/ class=md-nav__link> 享元模式(Flyweight) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/facade/ class=md-nav__link> 外观模式(Facade) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/bridge/ class=md-nav__link> 桥接模式(Bridge) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/strategy/ class=md-nav__link> 策略模式(Strategy) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/state/ class=md-nav__link> 状态模式(State) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/chain-of-responsibility/ class=md-nav__link> 责任链模式(Chain of responsibility) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/interpreter/ class=md-nav__link> 解释器模式(Interpreter) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/command/ class=md-nav__link> 命令模式(Command) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/observer/ class=md-nav__link> 观察者模式(Observer) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/memento/ class=md-nav__link> 备忘录模式(Memento) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/iterator/ class=md-nav__link> 迭代器模式(Iterator) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/template-method/ class=md-nav__link> 模版方法模式(Template method) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/visitor/ class=md-nav__link> 访问者模式(Visitor) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/mediator/ class=md-nav__link> 中介者模式(Mediator) </a> </li> <li class=md-nav__item> <a href=../../../../design-pattern/confusing-design-pattern/ class=md-nav__link> 易混淆的设计模式 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Effective Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Effective Java" data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Effective Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../effective-java/effective-java/ class=md-nav__link> Effective Java概述 </a> </li> <li class=md-nav__item> <a href=../../../../effective-java/chapter1/ class=md-nav__link> 创建和销毁对象 </a> </li> <li class=md-nav__item> <a href=../../../../effective-java/chapter2/ class=md-nav__link> 对于所有对象都通用的方法 </a> </li> <li class=md-nav__item> <a href=../../../../effective-java/chapter3/ class=md-nav__link> 类和接口 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> JVM <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JVM data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> JVM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../jvm/jvm-content/ class=md-nav__link> 深入理解Java虚拟机 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/java-memory-area-oom/ class=md-nav__link> Java内存区域与内存溢出异常 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/java-gc/ class=md-nav__link> 垃圾收集器与内存分配策略 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/class-struct/ class=md-nav__link> 类文件结构 </a> </li> <li class=md-nav__item> <a href=../../../../jvm/load-class/ class=md-nav__link> 虚拟机类加载机制 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Java data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../java/generics-java-kotlin/ class=md-nav__link> Java&Kotlin在泛型方面的区别 </a> </li> <li class=md-nav__item> <a href=../../../../java/java-collections/ class=md-nav__link> Java集合总结 </a> </li> <li class=md-nav__item> <a href=../../../../java/java-foundation/ class=md-nav__link> Java常见概念 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Refactoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Refactoring data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Refactoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../refactoring/refactoring/ class=md-nav__link> 重构：改善既有代码的设计 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-build-process class=md-nav__link> The build process </a> </li> <li class=md-nav__item> <a href=#proguard-r8 class=md-nav__link> ProGuard &amp; R8 </a> <nav class=md-nav aria-label="ProGuard & R8"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 启用压缩、混淆以及优化 </a> <nav class=md-nav aria-label=启用压缩、混淆以及优化> <ul class=md-nav__list> <li class=md-nav__item> <a href=#r8 class=md-nav__link> R8配置文件 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 额外配置 </a> <nav class=md-nav aria-label=额外配置> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 代码压缩 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#keep class=md-nav__link> 自定义需要keep的代码 </a> <nav class=md-nav aria-label=自定义需要keep的代码> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 压缩资源 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#keep_1 class=md-nav__link> 自定义需要keep的资源 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 启用严格引用检查 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 移除无用的替代资源 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 合并重复资源 </a> <nav class=md-nav aria-label=合并重复资源> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 代码混淆 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 代码优化 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 启用更激进的优化 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gradlew class=md-nav__link> gradlew命令 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Android Studio build过程</h1> <details class=question open=open><summary>Android Studio点击build按钮后，Android Studio就会编译整个项目并将apk安装到手机上，请详细描述下这个过程的背后到底发生了什么？</summary><p>点击build按钮后，AS会根据Build Variants中Module的Build Variant的类型对对应的Module执行<code>gradlew :${Module}:assemble${variant}</code><br> 以一个典型的单Module的工程为例，此处就是<code>gradlew :app:assembleDebug</code></p> </details> <h2 id=the-build-process><a href=https://developer.android.com/studio/build#build-process>The build process</a><a class=headerlink href=#the-build-process title="Permanent link">&para;</a></h2> <p>下面是典型Android应用的构建过程： </p> <p><img alt="典型Android App模块的构建过程" src=/assets/images/android/build-process.png></p> <p>该过程一般分为四步：编译 -&gt; 打包 -&gt; 签名 -&gt; 对齐</p> <ol> <li>编译器将源代码转换为DEX（Dalvik Executable）文件，其中包括在Android设备上运行的字节码；其余的作为打包好的资源</li> <li>APK Packager把DEX文件以及打包好的资源再次打包成一个单一的APK。在安装或发布APK之前，APK必须要被签名</li> <li>APK Packager会使用debug签名文件或release签名文件对APK进行签名</li> <li>在生成最终的APK之前，APK Packager会使用<a href=https://developer.android.com/studio/command-line/zipalign.html>zipalign</a>工具进行优化，此工具会使我们的App在运行时使用更少的内存</li> </ol> <p><img alt="更详细的Android App模块的构建过程" src=/assets/images/android/android_apk_build_process.png></p> <p>右图是更详细的构建过程图（<em>该部分内容没有在官网上找到出处，据说是老版本官网的内容</em>）</p> <p>可以很明显的看到，这里面有七步：</p> <ol> <li>应用资源（res文件、assets文件、AndroidManifest.xml以及android.jar）通过 <strong>aapt</strong> 生成<code>R.java</code>文件以及打包好的资源文件</li> <li>AIDL文件通过 <strong>aidl</strong> 生成对应的Java文件</li> <li>源码文件、<code>R.java</code>文件以及AIDL生成的Java文件通过 <strong>javac</strong> 编译成<code>.class</code>文件</li> <li>第3步生成的<code>.class</code>文件以及第三方库中的<code>.class</code>文件通过 <strong>dx</strong> 处理生成<code>classes.dex</code>文件</li> <li>打包好的资源文件、上一步生成的<code>classes.dex</code>文件、第三方库中的资源文件以及<code>.so</code>文件等其他资源通过 <strong>apkbuilder</strong> 生成未签名的<code>.apk</code>文件</li> <li>调用 <strong>jarsigner</strong> 对上面未签名<code>.apk</code>进行签名</li> <li>调用 <strong>zipalign</strong> 对签名后的<code>.apk</code>进行对齐处理</li> </ol> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>注意：<code>apkbuilder</code>是一个调用了<code>tools/lib/sdklib.jar</code>里面<code>com.android.sdklib.build.</code> <code>ApkBuilderMain</code>的脚本，在某次sdk更新之后脚本被删除了，但是调用还在。<br> 关于<code>jarsigner</code>与脚本<code>apksigner</code>，这两着的差别在于V1签名和V2签名；<code>apksigner</code>支持V2签名。<a href=https://www.jianshu.com/p/53078d03c9bf>Android-APK签名工具-jarsigner和apksigner</a></p> </div> <p>编译工具路径可以参考：<a href=https://developer.android.com/studio/command-line#tools-build>Android SDK Build Tools</a><br> 编译流程可以参考：<a href=http://blog.zhaiyifan.cn/2016/02/13/android-reverse-2/ >Android逆向分析(2) APK的打包与安装</a></p> <p>点击查看<a href=/assets/images/android_build_process_detail.png>更详细的构建流程</a></p> <h2 id=proguard-r8>ProGuard &amp; R8<a class=headerlink href=#proguard-r8 title="Permanent link">&para;</a></h2> <p>在App构建的过程中，生成<code>.dex</code>文件之前，还会经过ProGuard或者R8的处理。这一步可以将App和Library中没有使用的代码、资源文件进行移除（又称Tree Shaking）；同时对于需要使用的代码，会使用短名称混淆这些类、字段和方法。</p> <blockquote> <p>本节参考文献： <a href=https://developer.android.com/studio/build/shrink-code>Shrink, obfuscate, and optimize your app - Android Developers</a><br> 截止2019-09-02，英语语言介绍的是R8编译器，中文文档还没有更新，所以还是ProGuard编译器。</p> </blockquote> <p>要尽可能减小 APK 文件，我们应该启用*压缩*来移除 release build 中未使用的代码和资源。在启用压缩时，我们还可以从 <em>混淆</em> （缩短类和成员的名称）和 <em>优化</em> （采用更积极的策略来进一步缩小应用程序的大小）中获益。</p> <p>当我们的项目使用Android Gradle plugin 3.4.0或以上时，插件不再使用ProGuard编辑器来执行编译期代码优化。取而代之的是R8编译器，其将处理以下编译期任务：</p> <ul> <li><strong>代码压缩（Code shrinking or tree-shaking）</strong> 检测并安全地从应用程序及其依赖库中删除未使用的类、字段、方法和属性（这使其成为处理<a href=https://developer.android.com/studio/build/multidex.html>64k引用限制</a>的有用工具）。例如，如果我们只使用了依赖库的少量API，则压缩可以识别我们应用中未使用的库代码，并从我们的应用中只删除这部分代码。</li> <li><strong>资源压缩（Resource shrinking）</strong> 从打包的应用程序中删除未使用的资源，包括应用程序依赖库中未使用的资源。它与代码压缩一起使用，这样一旦删除了未使用的代码，也可以安全地删除不再引用的任何资源。</li> <li><strong>混淆（Obfuscation）</strong> 缩短类和类成员的名称，从而减少DEX文件大小。</li> <li><strong>优化（Optimization）</strong> 检查并重写代码，以进一步减小应用程序DEX文件的大小。例如，如果R8检测到从不使用给定if-else语句的 else 分支，则R8将删除 else 分支的代码。</li> </ul> <p>在构建应用程序的 release 版本时，默认情况下，R8会自动执行上述编译时任务。但是，我们可以通过ProGuard规则文件禁用某些任务或自定义R8的行为。事实上，<strong>R8适用于所有现有的ProGuard规则文件</strong>，因此更新Android Gradle插件来使用R8，这不应该要求我们更改现有规则。</p> <h3 id=_1>启用压缩、混淆以及优化<a class=headerlink href=#_1 title="Permanent link">&para;</a></h3> <p>由于这些编译时优化会增加编译时间，且可能因为没有充分准备规则而会引入Bug。所以，开启这些编译优化任务最好的时间就是在版本发布前的最终版本。在项目级别的<code>build.gradle</code>文件中添加如下代码就可以开启压缩、混淆和优化了：</p> <div class=highlight><pre><span></span><code>android {
    buildTypes {
        release {
            // Enables code shrinking, obfuscation, and optimization for only
            // your project&#39;s release build type.
            minifyEnabled true

            // Enables resource shrinking, which is performed by the
            // Android Gradle plugin.
            shrinkResources true

            // Includes the default ProGuard rules files that are packaged with
            // the Android Gradle plugin. To learn more, go to the section about
            // R8 configuration files.
            proguardFiles getDefaultProguardFile(
                    &#39;proguard-android-optimize.txt&#39;),
                    &#39;proguard-rules.pro&#39;
        }
    }
    ...
}
</code></pre></div> <h4 id=r8>R8配置文件<a class=headerlink href=#r8 title="Permanent link">&para;</a></h4> <p>下面是R8使用的ProGuard配置文件的来源：</p> <figcaption>the sources of ProGuard rules files that R8 uses</figcaption> <table> <thead> <tr> <th>Source</th> <th>Location</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Android Studio</td> <td><strong>&lt;module-dir>/proguard-rules.pro</strong></td> <td></td> </tr> <tr> <td>Android Gradle Plugin</td> <td>Generated by the Android Gradle plugin at compile time.</td> <td>The Android Gradle plugin generates <strong>proguard-android-optimize.txt</strong>, which includes rules that are useful to most Android projects and enables <a href=https://developer.android.com/reference/androidx/annotation/Keep.html>@Keep* annotations</a>.</td> </tr> <tr> <td>Library dependencies</td> <td>AAR libraries: <strong>&lt;library-dir>/proguard.txt</strong><br><br>JAR libraries: <strong>&lt;library-dir>/META-INF/proguard/</strong></td> <td>如果aar库中已经包含了ProGuard文件，R8会自动使用这些规则。然而，我们需要注意，由于ProGuard规则是相加的，因此aar库中的规则也会影响到app中其他部分。</td> </tr> <tr> <td>Android Asset Package Tool 2 (AAPT2)</td> <td>After building your project with <strong>minifyEnabled true: &lt;module-dir>/build/intermediates/proguard-rules/debug/aapt_rules.txt</strong></td> <td>AAPT2 generates keep rules based on references to classes in your app’s manifest, layouts, and other app resources. For example, AAPT2 includes a keep rule for each Activity that you register in your app’s manifest as an entry point.</td> </tr> <tr> <td>Custom configuration files</td> <td>By default, when you create a new module using Android Studio, the IDE creates <strong>&lt;module-dir>/proguard-rules.pro</strong> for you to add your own rules.</td> <td>You can <a href=https://developer.android.com/studio/build/shrink-code#add-configuration>include additional configurations</a>, and R8 applies them at compile-time.</td> </tr> </tbody> </table> <p>当我们将<code>minifyEnabled</code>属性设置为<code>true</code>时，R8编译器会将上面表格中所有的来源结合到一起。这在排除R8故障的时候非常重要，因为其他编译期的依赖，例如三方库，可能会引发我们不知道的R8行为的改变。</p> <p>要在构建项目时输出R8应用的所有规则的完整报告，请在模块的<code>proguard-rules.pro</code>文件中包含以下内容：</p> <div class=highlight><pre><span></span><code>// You can specify any path and filename.
-printconfiguration ~/tmp/full-r8-config.txt
</code></pre></div> <h3 id=_2>额外配置<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <p>我们对不同的编译变量添加不同的ProGuard文件，在对应的<code>productFlavor</code>代码块中。下面的例子给<code>flavor2</code>添加了<code>flavor2-rules.pro</code>，因此，<code>flavor2</code>现在使用3个ProGuard规则了，因为<code>release</code>代码块中的rules也会被使用：</p> <div class=highlight><pre><span></span><code>android {
    ...
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile(
              &#39;proguard-android-optimize.txt&#39;),
              // List additional ProGuard rules for the given build type here. By default,
              // Android Studio creates and includes an empty rules file for you (located
              // at the root directory of each module).
              &#39;proguard-rules.pro&#39;
        }
    }
    flavorDimensions &quot;version&quot;
    productFlavors {
        flavor1 {
          ...
        }
        flavor2 {
            proguardFile &#39;flavor2-rules.pro&#39;
        }
    }
}
</code></pre></div> <h4 id=_3>代码压缩<a class=headerlink href=#_3 title="Permanent link">&para;</a></h4> <p>要缩小应用程序的代码，R8首先根据组合的配置文件集确定应用程序代码中的所有入口点（<em>entry point</em>）。这些入口点包括Android平台可用于打开应用程序的 Activity 或 Service 的所有类。从每个入口点开始，R8检查应用程序的代码，以构建应用程序可能在运行时访问的所有方法，成员变量和其他类的图。未连接到该图的代码被视为不能到达的（<em>unreachable</em>），可能会从应用中删除。</p> <p>下图显示了一个具有运行时依赖库的应用程序。在检查应用程序代码时，R8确定可以从<code>MainActivity.class</code>入口点抵达方法<code>foo()</code>、<code>faz()</code>和<code>bar()</code>。但是，我们的应用程序在运行时从不使用类<code>OkayApi.class</code>或其方法<code>baz()</code>，因此R8在压缩应用程序时会删除该代码。</p> <p><img alt="At compile-time, R8 builds a graph based on your project's combined keep rules to determine unreachable code." src=/assets/images/android/tree-shaking.png> <center>At compile-time, R8 builds a graph based on your project's combined keep rules to determine unreachable code.</center></p> <p>R8通过项目的R8配置文件中的<code>-keep</code>规则确定入口点。也就是说，keep 规则指定R8在压缩应用程序时不应丢弃的类，R8将这些类视为应用程序的可能入口点。Android Gradle插件和AAPT2会自动生成大多数应用项目所需的保留规则，例如activities、views和services。但是，如果我们需要用其他keep规则来自定义此默认行为，这也是支持的。</p> <h3 id=keep>自定义需要keep的代码<a class=headerlink href=#keep title="Permanent link">&para;</a></h3> <p>对于大多数情况，默认的ProGuard规则文件（<code>proguard-android-optimize.txt</code>）足以让R8删除未使用的代码。但是，某些情况很难让R8正确分析，并且可能会删除我们的应用实际需要的代码。可能错误删除代码的一些示例包括： </p> <ul> <li>当应用调用的方法来自 Java 原生接口 (JNI) 时</li> <li>当应用在运行时（例如使用反射）操作代码时</li> </ul> <p>要修复错误并强制R8保留某些代码，请在ProGuard规则文件中添加<code>-keep</code>行。例如： </p> <div class=highlight><pre><span></span><code>-keep public class MyClass
</code></pre></div> <p>或者，我们可以将<code>@Keep</code>注释添加到要保留的代码中。在类上添加<code>@Keep</code>会使整个类保持原样。在方法或字段上添加它将保持方法/字段（及其名称）以及类名完整。请注意，此注释仅在使用AndroidX注释库时以及包含随Android Gradle插件打包的ProGuard规则文件时才可用。</p> <p>在使用<code>-keep</code>选项时，有很多注意事项需要我们注意，更多关于这方面的内容可以阅读<a href=https://www.guardsquare.com/en/products/proguard/manual/usage>ProGuard Manual</a>。<a href=https://www.guardsquare.com/en/products/proguard/manual/troubleshooting>TroubleShooting</a>这一小节列出了我们可能遇到的常见问题。</p> <h4 id=_4>压缩资源<a class=headerlink href=#_4 title="Permanent link">&para;</a></h4> <p>资源压缩只与代码压缩协同工作。在代码压缩器删除所有未使用的代码之后，资源压缩器可以识别应用仍在使用的资源。这在我们添加包含资源的代码库时体现得尤为明显 ------ 我们必须移除未使用的库代码，使库资源变为未引用资源，才能通过资源压缩器将它们移除。</p> <p>在<code>build.gradle</code>文件中（在用于代码压缩的 <code>minifyEnabled</code> 旁边），将<code>shrinkResources</code>属性设置为<code>true</code>，就可以开启资源压缩了。</p> <div class=highlight><pre><span></span><code>android {
    ...
    buildTypes {
        release {
            shrinkResources true
            minifyEnabled true
            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;),
                    &#39;proguard-rules.pro&#39;
        }
    }
}
</code></pre></div> <h3 id=keep_1>自定义需要keep的资源<a class=headerlink href=#keep_1 title="Permanent link">&para;</a></h3> <p>如果我们有一些资源想要keep或者discard，我们可以在<code>/res/raw/keep.xml</code>文件中进行声明。<code>tools:keep</code>和<code>tools:discard</code>属性都接收以逗号(“,”)分隔的资源名字的列表，资源名字可以使用星号(“*”)作为一个通配符。</p> <p>比如：</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;resources</span> <span class=na>xmlns:tools=</span><span class=s>&quot;http://schemas.android.com/tools&quot;</span>
    <span class=na>tools:keep=</span><span class=s>&quot;@layout/l_used*_c,@layout/l_used_a,@layout/l_used_b*&quot;</span>
    <span class=na>tools:discard=</span><span class=s>&quot;@layout/unused2&quot;</span> <span class=nt>/&gt;</span>
</code></pre></div> <p>指定要舍弃的资源可能看似愚蠢，因为我们本可将它们删除，但在使用构建变体时，这样做可能很有用。例如，如果我们明知给定资源表面上会在代码中使用（并因此不会被压缩器移除），但实际不会用于给定构建变体，就可以将所有资源放入公用项目目录，然后为每个构建变体创建一个不同的 keep.xml 文件。构建工具也可能无法根据需要正确识别资源，这是因为编译器会添加内联资源 ID，而资源分析器可能不知道真正引用的资源和恰巧具有相同值的代码中的整数值之间的差别。</p> <h3 id=_5>启用严格引用检查<a class=headerlink href=#_5 title="Permanent link">&para;</a></h3> <p>通常，资源压缩器可以准确地确定是否使用了资源。但是，如果我们的代码调用<code>Resources.getIdentifier()</code>（或者如果我们的任何库执行此操作 ------ AppCompat库执行此操作），则表示我们的代码将根据动态生成的字符串查找资源名称。当我们执行这一调用时，默认情况下资源压缩器会采取防御性行为，将所有具有匹配名称格式的资源标记为可能已使用，无法移除。</p> <p>举个例子，下面的代码会导致所有<code>img_</code>前缀的资源被标记为已使用。</p> <div class=highlight><pre><span></span><code><span class=k>val</span> <span class=py>name</span> <span class=p>=</span> <span class=n>String</span><span class=p>.</span><span class=n>format</span><span class=p>(</span><span class=s>&quot;img_%1d&quot;</span><span class=p>,</span> <span class=n>angle</span> <span class=p>+</span> <span class=m>1</span><span class=p>)</span>
<span class=k>val</span> <span class=py>res</span> <span class=p>=</span> <span class=n>resources</span><span class=p>.</span><span class=n>getIdentifier</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=s>&quot;drawable&quot;</span><span class=p>,</span> <span class=n>packageName</span><span class=p>)</span>
</code></pre></div> <p>资源压缩器还会浏览代码以及各种 <code>res/raw/</code> 资源中的所有字符串常量，寻找格式类似于 <code>file:///android_res/drawable//ic_plus_anim_016.png</code> 的资源网址。如果它找到与其类似的字符串，或找到其他看似可用来构建与其类似的网址的字符串，则不会将它们移除。</p> <p>这些是默认启用的安全压缩模式的示例。但是，我们可以关闭这种“有备无患”处理，并指定资源压缩器只保留其确定已使用的资源。为此，请在<code>keep.xml</code>文件中将<code>shrinkMode</code>设置为<code>strict</code>，如下所示：</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;resources</span> <span class=na>xmlns:tools=</span><span class=s>&quot;http://schemas.android.com/tools&quot;</span>
    <span class=na>tools:shrinkMode=</span><span class=s>&quot;strict&quot;</span> <span class=nt>/&gt;</span>
</code></pre></div> <p>如果我们确实启用了严格压缩模式，并且代码也引用了包含动态生成字符串的资源，如上所示，那么我们必须使用通过<code>tools:keep</code>属性手动keep这些资源。</p> <h3 id=_6>移除无用的<a href=https://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources>替代资源</a><a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p>下面的代码片段展示了怎么样将语言资源限定为仅支持英语和法语：</p> <div class=highlight><pre><span></span><code>android {
    defaultConfig {
        ...
        resConfigs &quot;en&quot;, &quot;fr&quot;
    }
}
</code></pre></div> <p>同理，我们也可以利用 APK 拆分为不同设备构建不同的 APK，自定义在 APK 中包括的屏幕密度或 ABI 资源。</p> <h3 id=_7>合并重复资源<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <p>默认情况下，Gradle 还会合并同名资源，例如可能位于不同资源文件夹中的同名drawables。这一行为不受 <code>shrinkResources</code> 属性控制，也无法停用，因为在有多个资源匹配代码查询的名称时，有必要利用这一行为来避免错误。</p> <p>只有在两个或更多个文件具有完全相同的资源名称、类型和限定符时，才会进行资源合并。Gradle 会在重复项中选择其视为最佳选择的文件（根据下述优先顺序），并只将这一个资源传递给 AAPT，以供在 APK 文件中分发。</p> <p>Gradle 会在下列位置寻找重复资源：</p> <ul> <li>与 main source set 关联的主资源，一般位于 <code>src/main/res/</code> 中。</li> <li>变量overlay，来自构建类型和构建flavors。</li> <li>库项目依赖项。</li> </ul> <p>Gradle 会按以下级联优先顺序合并重复资源：</p> <p>依赖项 → 主资源 → 构建flavor → 构建类型</p> <p>例如，如果某个重复资源同时出现在主资源和构建flavor中，Gradle 会选择构建flavor中的重复资源。</p> <p>如果完全相同的资源出现在同一源集中，Gradle 无法合并它们，并且会发出资源合并错误。如果我们在 <code>build.gradle</code> 文件的 <code>sourceSet</code> 属性中定义了多个源集，则可能会发生这种情况，例如，如果 <code>src/main/res/</code> 和 <code>src/main/res2/</code> 包含完全相同的资源，就可能会发生这种情况。</p> <h4 id=_8>代码混淆<a class=headerlink href=#_8 title="Permanent link">&para;</a></h4> <p>混淆的目的是通过缩短应用程序的类，方法和字段的名称来减少应用程序的大小。<br> 虽然混淆不会从我们的应用程序中删除代码，但在具有索引许多类、方法和字段的DEX文件的应用程序中可以看到显著的减小。</p> <p>此外，如果我们的代码依赖于应用程序的方法和类的可预测命名 ------ 例如，在使用反射时，我们应该将这些签名视为入口点并为它们指定保留规则。那些保留规则告诉R8不仅要将该代码保留在应用程序的最终DEX中，还要保留其原始命名。</p> <h4 id=_9>代码优化<a class=headerlink href=#_9 title="Permanent link">&para;</a></h4> <p>为了进一步缩小我们的应用程序，R8会在更深层次上检查我们的代码，以删除更多未使用的代码，或者在可能的情况下重写代码以使其更简洁。下面是几个优化的例子：</p> <ul> <li>如果R8检测到从不使用给定if-else语句的 else 分支，则R8将删除 else 分支的代码</li> <li>如果我们的代码仅在一个地方调用方法，R8可能会删除该方法并在单个调用位置内联它。</li> <li>如果R8确定一个类只有一个唯一的子类，并且该类本身未实例化（例如，一个抽象基类仅由一个具体的实现类使用），那么R8可以组合这两个类并从app中删除一个类。</li> <li>要了解更多信息，请阅读Jake Wharton撰写的<a href=https://jakewharton.com/blog/ >R8优化博客文章</a>。</li> </ul> <p>R8不允许我们禁用或启用零碎的优化，或修改优化的行为。实际上，R8忽略了任何试图修改默认优化的ProGuard规则，例如<code>-optimizations</code>和<code>-optimizepasses</code>。此限制很重要，因为随着R8的不断改进，维护标准的优化行为有助于Android Studio团队轻松排除故障并解决我们可能遇到的任何问题。</p> <h3 id=_10>启用更激进的优化<a class=headerlink href=#_10 title="Permanent link">&para;</a></h3> <p>R8包含一组默认情况下未启用的其他优化。我们可以通过在项目的<code>gradle.properties</code>文件中包含以下内容来启用这些其他优化：</p> <div class=highlight><pre><span></span><code>android.enableR8.fullMode=true
</code></pre></div> <p>由于额外的优化使R8的行为与ProGuard不同，因此它们可能要求我们包含其他ProGuard规则以避免运行时问题。例如，假设我们的代码通过Java Reflection API引用了一个类。默认情况下，R8假定我们打算在运行时检查和操作该类的对象 ------ 即使我们的代码实际上没有 ------ 因此它会自动保留该类及其静态初始化程序。但是，当使用“完整模式”时，R8不会做出这种假设，如果R8断言你的代码在运行时从不使用该类，它会从你应用程序的最终DEX中删除该类。也就是说，如果要保留类及其静态初始化程序，则需要在规则文件中包含keep规则才能执行此操作。</p> <h2 id=gradlew>gradlew命令<a class=headerlink href=#gradlew title="Permanent link">&para;</a></h2> <p>可以通过如下命令获取编译log：</p> <div class=highlight><pre><span></span><code>./gradlew aR --info &gt; ~/Downloads/log.txt
</code></pre></div> <p>从中可以提取<code>assembleRelease</code>的子任务（日志有经过美化）：</p> <div class=highlight><pre><span></span><code>Tasks to be executed: [
  task &#39;:app:preBuild&#39;, 
  task &#39;:app:extractProguardFiles&#39;, 
  task &#39;:app:preReleaseBuild&#39;, 
  task &#39;:app:compileReleaseAidl&#39;, 
  task &#39;:app:compileReleaseRenderscript&#39;, 
  task &#39;:app:checkReleaseManifest&#39;, 
  task &#39;:app:generateReleaseBuildConfig&#39;, 
  task &#39;:app:prepareLintJar&#39;, 
  task &#39;:app:generateReleaseSources&#39;, 
  task &#39;:app:dataBindingExportBuildInfoRelease&#39;, 
  task &#39;:app:dataBindingMergeDependencyArtifactsRelease&#39;, 
  task &#39;:app:generateReleaseResValues&#39;, 
  task &#39;:app:generateReleaseResources&#39;, 
  task &#39;:app:mergeReleaseResources&#39;, 
  task &#39;:app:transformDataBindingBaseClassLogWithDataBindingMergeGenClassesForRelease&#39;, 
  task &#39;:app:dataBindingGenBaseClassesRelease&#39;, 
  task &#39;:app:dataBindingExportFeaturePackageIdsRelease&#39;, 
  task &#39;:app:mainApkListPersistenceRelease&#39;, 
  task &#39;:app:createReleaseCompatibleScreenManifests&#39;, 
  task &#39;:app:processReleaseManifest&#39;, 
  task &#39;:app:processReleaseResources&#39;, 
  task &#39;:app:kaptGenerateStubsReleaseKotlin&#39;, 
  task &#39;:app:kaptReleaseKotlin&#39;, 
  task &#39;:app:compileReleaseKotlin&#39;, 
  task &#39;:app:javaPreCompileRelease&#39;, 
  task &#39;:app:compileReleaseJavaWithJavac&#39;, 
  task &#39;:app:compileReleaseNdk&#39;, 
  task &#39;:app:compileReleaseSources&#39;, 
  task &#39;:app:lintVitalRelease&#39;, 
  task &#39;:app:mergeReleaseShaders&#39;, 
  task &#39;:app:compileReleaseShaders&#39;, 
  task &#39;:app:generateReleaseAssets&#39;, 
  task &#39;:app:mergeReleaseAssets&#39;, 
  task &#39;:app:validateSigningRelease&#39;, 
  task &#39;:app:signingConfigWriterRelease&#39;, 
  task &#39;:app:processReleaseJavaRes&#39;, 
  task &#39;:app:transformResourcesWithMergeJavaResForRelease&#39;, 
  task &#39;:app:transformClassesAndResourcesWithProguardForRelease&#39;, 
  task &#39;:app:transformClassesWithDexBuilderForRelease&#39;, 
  task &#39;:app:transformClassesWithMultidexlistForRelease&#39;, 
  task &#39;:app:transformDexArchiveWithDexMergerForRelease&#39;, 
  task &#39;:app:transformClassesAndDexWithShrinkResForRelease&#39;, 
  task &#39;:app:mergeReleaseJniLibFolders&#39;, 
  task &#39;:app:transformNativeLibsWithMergeJniLibsForRelease&#39;, 
  task &#39;:app:transformNativeLibsWithStripDebugSymbolForRelease&#39;, 
  task &#39;:app:packageRelease&#39;, 
  task &#39;:app:assembleRelease&#39;
]
</code></pre></div> <hr> <div class=md-source-date> <small> 最后更新: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2021年10月8日</span> </small> </div> <h2 id=__comments>评论</h2> <div id=disqus_thread></div> <script>var disqus_config=function(){this.page.url="https://blog.yorek.xyz/android/paid/zsxq/week22-android-studio-build/",this.page.identifier="/android/paid/zsxq/week22-android-studio-build/"};window.addEventListener("load",function(){var e=document,i=e.createElement("script");i.src="//yorekliu.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)})</script> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../week21-mvc%26mvp%26mvvm/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> MVC、MVP和MVVM </div> </div> </a> <a href=../week23-load-large-bitmap/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> 大尺寸图片加载问题 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> &copy; 2021 Yorek </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/YorekLiu target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg> </a> <a href=lyytogether@gmail.com target=_blank rel=noopener title class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script> <script src=../../../../assets/javascripts/bundle.d892486b.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>